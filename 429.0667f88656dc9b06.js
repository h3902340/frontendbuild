"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[429],{2427:(Y,F,m)=>{m.d(F,{x:()=>T});var c=m(1626),j=m(7673),O=m(8141),t=m(9437),C=m(5440),y=m(4438);let T=(()=>{class h{constructor(d,p){this.httpClient=d,this.zone=p,this.cacheDuration=18e4,this.headers=(new c.Lr).set("Content-Type","application/json"),this.apiPlayers="/player/playerlist",this.apiPlayersActive="/player/playerlistactive",this.apiPlayersNameLike="/player/playerautocomplete",this.apileaderboardStats="/player/leaderboardstats",this.apiLeaderboard="/player/leaderboard",this.apiPlayerlistfull="/player/playerlistfull",this.apiPlayerlistElo="/player/getEloForList",this.cache={},this.localStorageKey="playersListTrunc"}getLeaderboard(d){const p=(new c.Nl).set("gameMode",d.toString()),f={headers:this.headers,params:p},b="getLeaderboard_"+d,g=this.localStorageKey+"_"+d,M=this.cache[b];return this.isCacheExpired(d)?this.httpClient.get(C.p+this.apiLeaderboard,f).pipe((0,O.M)(v=>{this.cache[b]={data:v,expiry:new Date(Date.now()+this.cacheDuration)};const k=v.slice(0,100),N=g+"_expiration";localStorage.setItem(g,JSON.stringify(k)),localStorage.setItem(N,new Date(Date.now()+this.cacheDuration).toISOString())}),(0,t.W)(this.handleError)):(0,j.of)(M.data)}isCacheExpired(d){const f=this.cache["getLeaderboard_"+d];return!f||Date.now()>=f.expiry.getTime()}handleError(d){let p="";return p=d.error instanceof ErrorEvent?"An error occurred: "+d.error.message:`Backend returned code ${d.status}: ${d.body}`,console.error(p),(0,j.of)([])}getLeaderboardList(d,p,f,b,g,M){let v=(new c.Nl).set("gameMode",d.toString()).set("search",p).set("page",f.toString()).set("size",b.toString()).set("sortField",g).set("sortOrder",M);return this.httpClient.get(C.p+this.apiPlayers,{headers:this.headers,params:v})}getLeaderboardActiveList(d,p,f,b,g,M){let v=(new c.Nl).set("gameMode",d.toString()).set("search",p).set("page",f.toString()).set("size",b.toString()).set("orderBy",g).set("direction",M);return this.httpClient.get(C.p+this.apiPlayersActive,{headers:this.headers,params:v})}getPlayerNameLikeList(d){let p=(new c.Nl).set("name",d.toString());return this.httpClient.get(C.p+this.apiPlayersNameLike,{headers:this.headers,params:p})}getLeaderboardStats(d){let p=(new c.Nl).set("gameMode",d.toString());return this.httpClient.get(C.p+this.apileaderboardStats,{headers:this.headers,params:p})}getPlayerList(){return this.httpClient.get(C.p+this.apiPlayerlistfull,{headers:this.headers})}getEloForList(d,p){let f=(new c.Nl).set("players",d.join(",")).set("gameMode",p);return this.httpClient.get(`${C.p}${this.apiPlayerlistElo}`,{headers:this.headers,params:f})}static#t=this.\u0275fac=function(p){return new(p||h)(y.KVO(c.Qq),y.KVO(y.SKi))};static#e=this.\u0275prov=y.jDH({token:h,factory:h.\u0275fac,providedIn:"root"})}return h})()},9429:(Y,F,m)=>{m.r(F),m.d(F,{TournamentsModule:()=>nn});var c=m(177),j=m(7315),O=m(4710),t=m(4438),C=m(8010),y=m(216),T=m(5665),h=m(6713),B=m(6850),d=m(1997),p=m(8834);let f=(()=>{class i{static#t=this.\u0275fac=function(o){return new(o||i)};static#e=this.\u0275cmp=t.VBU({type:i,selectors:[["app-tournament-details"]],inputs:{tournamentParameter:"tournamentParameter"},decls:137,vars:0,consts:[[1,"host-container"],[1,"host-name"],[1,"description-container"],[1,"description-left"],[1,"tournament-description"],[1,"tournament-name-text"],[1,"info-text"],[1,"section-row"],[1,"title-text-nm"],[1,"button-container"],["mat-raised-button","","color","primary"],[1,"description-right"],["src","assets/icons/tournaments/tournament-placeholder.png","alt","",1,"tournament-banner"],["animationDuration","2000ms","dynamicHeight","true",2,"height","800px"],["label","Overview"],[1,"section-container","overview-grid-container"],[1,"overview-grid-item"],[1,"title-text"],[1,"section-container"],[1,"prize-grid-container"],[1,"prize-grid-item"],[1,"box-left"],["src","assets/icons/tournaments/resource_gold.png",1,"prize-icon"],[1,"box-right"],[1,"gold"],["src","assets/icons/tournaments/veterancy_gold.png",1,"prize-icon"],["src","assets/icons/tournaments/veterancy_silver.png",1,"prize-icon"],[1,"silver"],["src","assets/icons/tournaments/veterancy_bronze.png",1,"prize-icon"],[1,"bronze"],["label","Round of 16 | Best of 3"],[1,"round-container"],[1,"schedule-container"],[1,"map-container"],[1,"map-item"],[1,"map-card"],[1,"map"],["src","assets/icons/tournaments/eu_hungarian_plains_mini.png"],["label","Quarterfinals | Best of 5"],["label","Semifinals | Best of 7"],["label","Finals | Best of 9"],["label","Rules"],["label","Participants"],[1,"participants-grid-container"],[1,"participants-grid-item"],["src","assets/images/avatar_weekly_253.png",1,"steam-avatar"],[1,"section-column"],["label","Brackets"],["label","Media"],["label","Announcements"]],template:function(o,n){1&o&&(t.j41(0,"div",0)(1,"div",1),t.EFF(2,"Bronchy"),t.k0s(),t.j41(3,"div"),t.EFF(4,"7 days"),t.k0s()(),t.nrm(5,"mat-divider"),t.j41(6,"div",2)(7,"div",3)(8,"div",4)(9,"span",5),t.EFF(10,"Kavern Kombat IV"),t.k0s(),t.j41(11,"span",6),t.EFF(12," Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aenean egestas interdum justo, eu facilisis turpis vehicula nec. Sed porttitor magna et nisl lacinia, eu aliquet tortor bibendum. Nunc id semper nulla. Sed enim arcu, venenatis pretium euismod quis, sodales vel tortor. Donec eu nibh vel magna congue commodo. Donec lobortis erat leo, ut malesuada velit laoreet ac. Sed hendrerit tempus lorem, vel sodales ex congue vel. "),t.k0s()(),t.j41(13,"div",7)(14,"span",8),t.EFF(15,"Registration Deadline:"),t.k0s(),t.j41(16,"span",6),t.EFF(17,"February 26, 1989 11:59 PM EST"),t.k0s()(),t.j41(18,"div",9)(19,"button",10),t.EFF(20,"Sign up"),t.k0s()()(),t.j41(21,"div",11),t.nrm(22,"img",12),t.k0s()(),t.j41(23,"mat-tab-group",13)(24,"mat-tab",14)(25,"div",15)(26,"div",16)(27,"span",17),t.EFF(28,"Game"),t.k0s(),t.j41(29,"span",6),t.EFF(30,"Age of Empires III: Definitive Edition"),t.k0s()(),t.j41(31,"div",16)(32,"span",17),t.EFF(33,"Type & Format"),t.k0s(),t.j41(34,"span",6),t.EFF(35,"Single Stage - Single Elimination (1v1)"),t.k0s()(),t.j41(36,"div",16)(37,"span",17),t.EFF(38,"Date & Time"),t.k0s(),t.j41(39,"span",6),t.EFF(40,"February 26, 1989 to February 26, 2024"),t.k0s()(),t.j41(41,"div",16)(42,"span",17),t.EFF(43,"Registration"),t.k0s(),t.j41(44,"span",6),t.EFF(45,"By host invitation only"),t.k0s()(),t.j41(46,"div",16)(47,"span",17),t.EFF(48,"# of Participants"),t.k0s(),t.j41(49,"span",6),t.EFF(50,"12 / 16 registered players"),t.k0s()(),t.j41(51,"div",16)(52,"span",17),t.EFF(53,"Restrictions"),t.k0s(),t.j41(54,"span",6),t.EFF(55,"None"),t.k0s()()(),t.j41(56,"div",18)(57,"div",17),t.EFF(58,"Prize Pool & Distribution"),t.k0s(),t.j41(59,"div",19)(60,"div",20)(61,"div",21),t.nrm(62,"img",22),t.k0s(),t.j41(63,"div",23)(64,"span",24),t.EFF(65,"$50,000"),t.k0s()()(),t.j41(66,"div",20)(67,"div",21),t.nrm(68,"img",25),t.k0s(),t.j41(69,"div",23)(70,"span",24),t.EFF(71,"$30,000"),t.k0s()()(),t.j41(72,"div",20)(73,"div",21),t.nrm(74,"img",26),t.k0s(),t.j41(75,"div",23)(76,"span",27),t.EFF(77,"$15,000"),t.k0s()()(),t.j41(78,"div",20)(79,"div",21),t.nrm(80,"img",28),t.k0s(),t.j41(81,"div",23)(82,"span",29),t.EFF(83,"$5,000"),t.k0s()()()()(),t.j41(84,"div",18)(85,"div",17),t.EFF(86,"Battle Format, Timeframes, and Map Pool"),t.k0s(),t.j41(87,"mat-tab-group")(88,"mat-tab",30)(89,"div",31)(90,"div",17),t.EFF(91,"Schedule"),t.k0s(),t.j41(92,"div",32)(93,"span",6),t.EFF(94,"Start Time: Friday, April 14, 2024"),t.k0s(),t.j41(95,"span",6),t.EFF(96,"End Time: Wednesday, April 24, 2024"),t.k0s()(),t.j41(97,"div",33)(98,"div",34)(99,"div",35)(100,"span"),t.EFF(101,"Game 1"),t.k0s(),t.j41(102,"span"),t.EFF(103,"Hungarian Plains"),t.k0s()(),t.j41(104,"div",36),t.nrm(105,"img",37),t.k0s()()()()(),t.nrm(106,"mat-tab",38)(107,"mat-tab",39)(108,"mat-tab",40),t.k0s()()(),t.j41(109,"mat-tab",41)(110,"div",18)(111,"div",17),t.EFF(112,"Chapter Heading 1"),t.k0s(),t.j41(113,"div",6),t.EFF(114," Lorem ipsum dolor sit amet, consectetur adipiscing elit. Praesent ac purus quam. Etiam tellus risus, rhoncus sed volutpat in, sollicitudin pulvinar nulla. Nulla est ex, cursus non eros sed, vestibulum tristique odio. Quisque magna ipsum, pretium quis ante eget, mattis pretium ipsum. Sed euismod, turpis ac condimentum sagittis, eros velit convallis purus, sed interdum diam tellus ac justo. Nam molestie arcu justo, ac ultricies arcu sollicitudin sit amet. Ut porta ac sem sed mollis. Suspendisse id risus ex. "),t.k0s()()(),t.j41(115,"mat-tab",42)(116,"div",18)(117,"div",7)(118,"span",8),t.EFF(119,"Registered Players:"),t.k0s(),t.j41(120,"span",6),t.EFF(121,"16"),t.k0s()(),t.j41(122,"div",43)(123,"div",44)(124,"div"),t.nrm(125,"img",45),t.k0s(),t.j41(126,"div",46)(127,"span",6),t.EFF(128,"Bronchy"),t.k0s(),t.j41(129,"span",6),t.EFF(130,"Quarterfinals | #1"),t.k0s()()()()()(),t.j41(131,"mat-tab",47),t.EFF(132,"Brackets"),t.k0s(),t.j41(133,"mat-tab",48),t.EFF(134,"Media"),t.k0s(),t.j41(135,"mat-tab",49),t.EFF(136,"Announcements"),t.k0s()())},dependencies:[B.mq,B.T8,d.q,p.$z],styles:[".host-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.host-name[_ngcontent-%COMP%]{font-family:Trajan Pro;font-size:clamp(1rem,2vw,1.5rem);color:#6dcff6;text-shadow:2px 2px 4px rgba(0,0,0,.25)}.description-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.description-left[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:50%;gap:1rem}.tournament-description[_ngcontent-%COMP%]{display:flex;flex-direction:column}.tournament-name-text[_ngcontent-%COMP%]{font-family:Trajan Pro;font-size:clamp(1rem,2vw,2rem);color:var(--yellow-brand);text-shadow:2px 2px 4px rgba(0,0,0,.25)}.title-text[_ngcontent-%COMP%], .title-text-nm[_ngcontent-%COMP%]{font-family:Trajan Pro;font-size:clamp(.9rem,2vw,1.1rem);color:var(--yellow-brand);text-shadow:2px 2px 4px rgba(0,0,0,.25)}.title-text[_ngcontent-%COMP%]{margin-top:1rem}.info-text[_ngcontent-%COMP%]{font-size:clamp(.8rem,2vw,1rem)}.description-right[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;padding:1rem;width:50%}img.tournament-banner[_ngcontent-%COMP%]{max-height:400px;border-radius:10px;box-shadow:2px 2px 4px #00000080}.button-container[_ngcontent-%COMP%]{display:flex;align-items:center}.section-container[_ngcontent-%COMP%]{padding-left:1rem;padding-right:1rem}.section-row[_ngcontent-%COMP%]{display:flex;gap:1rem;flex-wrap:wrap}.section-column[_ngcontent-%COMP%]{display:flex;flex-direction:column}.overview-grid-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);grid-template-rows:repeat(2,auto);gap:.2rem}.overview-grid-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;white-space:nowrap}.prize-grid-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(150px,1fr));gap:1rem}.prize-grid-item[_ngcontent-%COMP%]{margin:.5rem;display:flex;border-radius:5px;box-shadow:2px 2px 4px #00000080}img.prize-icon[_ngcontent-%COMP%]{max-width:20px;max-height:auto}.box-left[_ngcontent-%COMP%]{display:flex;width:30px;height:30px;background:#18181880;border-radius:5px 0 0 5px;align-items:center;justify-content:center}.box-right[_ngcontent-%COMP%]{display:flex;width:120px;height:30px;background:#45454580;border-radius:0 5px 5px 0;align-items:center;padding:.5rem;font-weight:700}.gold[_ngcontent-%COMP%]{background:linear-gradient(180deg,#fcf0ae,#ffbe00);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;text-shadow:2px 2px 4px rgba(0,0,0,.25)}.silver[_ngcontent-%COMP%]{background:linear-gradient(180deg,#e0e0e0,#b8b8b8);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;text-shadow:2px 2px 4px rgba(0,0,0,.25)}.bronze[_ngcontent-%COMP%]{background:linear-gradient(180deg,#cd7f32,#8c4f1b);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;text-shadow:2px 2px 4px rgba(0,0,0,.25)}.schedule-container[_ngcontent-%COMP%]{display:flex;gap:1rem}.map-container[_ngcontent-%COMP%]{display:flex}.map-item[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center;height:10rem}.map-card[_ngcontent-%COMP%]{position:relative;display:flex;flex-direction:column;justify-content:center;background-color:#5d4d2877;border:1px solid rgba(0,0,0,.9);box-sizing:2px 2px 4px rgba(0,0,0,.5);border-radius:10px;padding:1rem;width:16rem;height:6rem;flex-grow:1;z-index:1}.map[_ngcontent-%COMP%]{position:absolute;top:50%;right:-3rem;transform:translateY(-50%);overflow:hidden;flex-shrink:0;z-index:2}.map[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-height:8rem;max-width:8rem;box-sizing:2px 2px 4px rgba(0,0,0,.5)}.participants-grid-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(250px,1fr));gap:1rem}.participants-grid-item[_ngcontent-%COMP%]{width:250px;height:auto;display:flex;align-items:center;gap:.5rem;background:#454545;box-shadow:2px 2px 4px #00000040;border-radius:5px;padding:.5rem}.steam-avatar[_ngcontent-%COMP%]{height:45px;width:45px;border-radius:5px}@media screen and (max-width: 1000px){.description-container[_ngcontent-%COMP%]{flex-direction:column}.description-left[_ngcontent-%COMP%], .description-right[_ngcontent-%COMP%]{width:100%}}@media screen and (max-width: 400px){.tournament-status[_ngcontent-%COMP%]{gap:.2rem}}"]})}return i})();var b=m(467),g=m(9198),M=m(4412),v=m(5440),k=m(1626),N=m(5416);let P=(()=>{class i{constructor(e,o){this.http=e,this.snackBar=o,this.apiUrlGet="/tournament/allPublished",this.apiUrlGetByUser="/tournament/allByUser",this.apiUrlGetHost="/tournament/host",this.apiUrlSave="/tournament/create",this.apiUrlDelete="/tournament/delete",this.headers=(new k.Lr).set("Content-Type","application/json"),this.createNewTournament()}createNewTournament(){this.tournamentSubject=new M.t({id:null,idPlayerHost:"",steamAvatar:"",hostName:"",dateStart:void 0,country:"",maxPlayers:2,game:1,invitational:!1,format:0,dateSignupStart:void 0,dateSignupClose:void 0,signupCost:0,prizeTotal:0,banner:"",name:"",description:"",gameMode:1,minElo:0,maxElo:0,bestMaxElo:0,published:!1,tournamentAnnounce:[],tournamentHost:[],tournamentPlayers:[],tournamentPrize:[{id:null,idTournament:null,place:0,prizePercent:0}],tournamentRules:[{id:null,idTournament:null,title:"",content:"",displayOrder:0}],tournamentRoundsDef:[{id:null,idTournament:null,roundLevel:1,gameCount:3,dateStart:void 0,dateEnd:void 0,dateStartDate:void 0,dateEndDate:void 0,groupCount:1,tournamentRoundsMaps:[{id:null,idTournamentRoundsDef:null,idMap:0,displayOrder:0,blindPick:!1},{id:null,idTournamentRoundsDef:null,idMap:0,displayOrder:1,blindPick:!1},{id:null,idTournamentRoundsDef:null,idMap:0,displayOrder:2,blindPick:!1}]}]})}resetTournament(e){null!=e.id?this.deleteTournament(e.id).subscribe({next:()=>{this.createNewTournament(),this.snackBar.open("Tournament reset!","Close",{duration:3e3})},error:o=>{console.error("Error deleting tournament",o),this.snackBar.open("Error in resetting tournament!","Close",{duration:3e3})}}):(this.createNewTournament(),this.snackBar.open("New tournament created!","Close",{duration:3e3}))}deleteTournament(e){return console.log(e),this.http.delete(`${v.p}${this.apiUrlDelete}/${e}`,{headers:this.headers})}getTournament(){return this.tournamentSubject.asObservable()}getTournamentHost(e){let o=(new k.Nl).set("idSteam",e);return this.http.get(`${v.p}${this.apiUrlGetHost}`,{headers:this.headers,params:o})}updateTournament(e){this.tournamentSubject.next(e)}getTournaments(){return this.http.get(`${v.p}${this.apiUrlGet}`)}getTournamentsByuser(e){let o=(new k.Nl).set("idSteam",e);return this.http.get(`${v.p}${this.apiUrlGetByUser}`,{headers:this.headers,params:o})}saveTournament(e){return this.http.post(`${v.p}${this.apiUrlSave}`,e)}save(e){this.saveTournament(e).subscribe({next:o=>{this.updateTournament(o),this.snackBar.open("Saved!","Close",{duration:3e3})},error:o=>this.snackBar.open("Error in saving tournament!","Close",{duration:3e3})})}static#t=this.\u0275fac=function(o){return new(o||i)(t.KVO(k.Qq),t.KVO(N.UG))};static#e=this.\u0275prov=t.jDH({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var G=m(4823);function H(i,s){1&i&&(t.j41(0,"div",39),t.EFF(1,"UPCOMING"),t.k0s())}function W(i,s){1&i&&(t.j41(0,"div",40),t.EFF(1,"UNPUBLISHED"),t.k0s())}function K(i,s){1&i&&t.nrm(0,"img",41)}function J(i,s){if(1&i){const e=t.RV6();t.qex(0),t.j41(1,"div",2),t.bIt("click",function(){const n=t.eBV(e).$implicit,a=t.XpG(2);return t.Njj(a.onCardClick(n))}),t.j41(2,"div",3),t.DNE(3,H,2,0,"div",4)(4,W,2,0,"div",5),t.j41(5,"div",6),t.nrm(6,"img",7),t.k0s()(),t.j41(7,"div",8)(8,"div",9),t.DNE(9,K,1,0,"img",10),t.j41(10,"div",11),t.EFF(11),t.k0s()(),t.j41(12,"div",12)(13,"div",13)(14,"div",14),t.nrm(15,"img",15),t.j41(16,"div"),t.EFF(17),t.k0s()(),t.j41(18,"div",16),t.nrm(19,"img",17),t.j41(20,"div"),t.EFF(21),t.k0s()()(),t.j41(22,"div",18)(23,"div",19),t.nrm(24,"img",20),t.j41(25,"div"),t.EFF(26),t.k0s()(),t.j41(27,"div",21),t.nrm(28,"img",22),t.j41(29,"div"),t.EFF(30),t.k0s()(),t.j41(31,"div",23),t.nrm(32,"img",24),t.j41(33,"div"),t.EFF(34),t.k0s()()()()(),t.j41(35,"div",25)(36,"div",26)(37,"div",27),t.EFF(38,"Starts in 7 days"),t.k0s()(),t.j41(39,"div",28)(40,"div",29)(41,"div",30),t.nrm(42,"img",31),t.j41(43,"div"),t.EFF(44),t.k0s()(),t.j41(45,"div",32),t.nrm(46,"img",33),t.j41(47,"div"),t.EFF(48),t.k0s()()(),t.j41(49,"div",34)(50,"div",35),t.nrm(51,"img",36),t.j41(52,"div"),t.EFF(53,"25$"),t.k0s()(),t.j41(54,"div",37),t.nrm(55,"img",38),t.j41(56,"div"),t.EFF(57),t.k0s()()()()()(),t.bVm()}if(2&i){const e=s.$implicit,o=t.XpG(2);t.R7$(3),t.Y8G("ngIf",e.published),t.R7$(),t.Y8G("ngIf",!e.published),t.R7$(2),t.Y8G("src",e.banner||"assets/icons/tournaments/tournament-placeholder.png",t.B4B),t.R7$(3),t.Y8G("ngIf",!0),t.R7$(2),t.JRh(e.name),t.R7$(6),t.JRh(e.game),t.R7$(4),t.SpI("Hosted by ",e.tournamentHost[0].name,""),t.R7$(5),t.JRh(e.dateStart),t.R7$(4),t.JRh(e.dateStart),t.R7$(4),t.JRh(e.country),t.R7$(10),t.JRh(o.getGameMode(e.gameMode)),t.R7$(4),t.Lme(" ",e.tournamentPlayers.length," / ",e.maxPlayers," "),t.R7$(9),t.JRh(e.prizeTotal)}}function Q(i,s){if(1&i&&(t.qex(0),t.DNE(1,J,58,14,"ng-container",1),t.bVm()),2&i){const e=t.XpG();t.R7$(),t.Y8G("ngForOf",e.tournaments)}}let q=(()=>{class i{constructor(e,o){this.tournamentService=e,this.authService=o,this.tournaments=[],this.subscriptions=[],this.isLoading=!0,this.onTournamentClicked=new t.bkB}ngOnInit(){this.authService.isLoggedIn?this.subscriptions.push(this.authService.getUserProfile().subscribe(e=>{this.getTournamentsByUser(e.idSteam)})):this.getTournaments()}getTournaments(){let e;e=this.tournamentService.getTournaments(),this.subscriptions.push(e.subscribe({next:this.handleResponse.bind(this),error:this.handleError.bind(this)}))}getTournamentsByUser(e){let o;o=this.tournamentService.getTournamentsByuser(e),this.subscriptions.push(o.subscribe({next:this.handleResponse.bind(this),error:this.handleError.bind(this)}))}handleResponse(e){var o=this;return(0,b.A)(function*(){o.isLoading=!1,o.tournaments=e})()}handleError(e){console.error("Error fetching tournaments data: ",e),this.isLoading=!1}getGameMode(e){return(0,g.hc)(e)}onCardClick(e){console.log("Card clicked:",e),this.onTournamentClicked.emit(e)}ngOnDestroy(){this.subscriptions.forEach(e=>{e.unsubscribe()})}static#t=this.\u0275fac=function(o){return new(o||i)(t.rXU(P),t.rXU(C.uR))};static#e=this.\u0275cmp=t.VBU({type:i,selectors:[["app-tournaments-events"]],outputs:{onTournamentClicked:"onTournamentClicked"},decls:1,vars:1,consts:[[4,"ngIf"],[4,"ngFor","ngForOf"],[1,"card",3,"click"],[1,"left"],["class","vertical-text upcoming",4,"ngIf"],["class","vertical-text unpublished",4,"ngIf"],[1,"banner"],[3,"src"],[1,"middle"],[1,"title-container"],["src","assets/icons/tournaments/crown.svg",4,"ngIf"],[1,"title-text"],[1,"midbottom-container"],[1,"game-host-container"],[1,"game-container"],["src","assets/icons/tournaments/aoe3-icon.png",1,"aoe3-icon"],[1,"host-container"],["src","assets/icons/tournaments/certified.svg"],[1,"date-country-container"],["matTooltip","Your tooltip message here",1,"date-container"],["src","assets/icons/tournaments/calendar3.svg"],[1,"time-container"],["src","assets/icons/tournaments/clock.svg"],[1,"country-container"],["src","assets/icons/tournaments/geo-alt.svg"],[1,"right"],[1,"countdown-container"],[1,"countdown"],[1,"rightbottom"],[1,"mode-player-container"],[1,"mode-container"],["src","assets/icons/tournaments/joystick.svg"],[1,"player-container"],["src","assets/icons/tournaments/people.svg"],[1,"fee-prize-container"],[1,"fee-container"],["src","assets/icons/tournaments/ticket.svg"],[1,"prize-container"],["src","assets/icons/tournaments/money-bag.svg"],[1,"vertical-text","upcoming"],[1,"vertical-text","unpublished"],["src","assets/icons/tournaments/crown.svg"]],template:function(o,n){1&o&&t.DNE(0,Q,2,1,"ng-container",0),2&o&&t.Y8G("ngIf",n.tournaments)},dependencies:[c.Sq,c.bT,G.oV],styles:['.card[_ngcontent-%COMP%]{display:flex;flex-direction:row;background:#45454580;color:#aaa;font-family:"Source Sans 3";font-size:1rem;font-weight:400;font-style:normal;text-shadow:2px 2px 4px rgba(0,0,0,.25)}.card[_ngcontent-%COMP%]:hover{background:#454545}.left[_ngcontent-%COMP%]{display:flex}.vertical-text[_ngcontent-%COMP%]{writing-mode:vertical-rl;text-align:center;border-radius:5px 0 0 5px;font-weight:700;color:#fff;margin-right:.5rem;font-size:1.1rem;font-family:"Source Sans 3";line-height:1.6;text-shadow:none}.open[_ngcontent-%COMP%]{background-color:#6be96b26}.closed[_ngcontent-%COMP%]{background-color:#ff000026}.ongoing[_ngcontent-%COMP%]{background-color:#ffbf0025}.upcoming[_ngcontent-%COMP%]{background-color:#66007440}.unpublished[_ngcontent-%COMP%]{background-color:#15d2eb40}.banner[_ngcontent-%COMP%]{display:flex;max-width:15rem;width:auto;height:auto;margin:.5rem;border-radius:5px;filter:drop-shadow(2px 2px 4px rgba(0,0,0,.25))}.middle[_ngcontent-%COMP%]{display:flex;flex:1;flex-direction:column;justify-content:space-between;margin:.5rem}.title-container[_ngcontent-%COMP%]{display:flex;gap:.5rem;align-items:center}.title-text[_ngcontent-%COMP%]{font-family:Trajan Pro;font-style:normal;font-weight:700;font-size:clamp(1rem,2vw,2rem);color:#fff;text-shadow:2px 2px 4px rgba(0,0,0,.25)}.midbottom-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.3rem}.game-host-container[_ngcontent-%COMP%]{display:flex;gap:1.2rem}.game-container[_ngcontent-%COMP%]{display:flex;gap:.5rem;align-items:center}.aoe3-icon[_ngcontent-%COMP%]{width:18px;height:auto}.host-container[_ngcontent-%COMP%]{display:flex;gap:.5rem;align-items:center}.date-country-container[_ngcontent-%COMP%]{display:flex;gap:1.2rem}.date-container[_ngcontent-%COMP%], .time-container[_ngcontent-%COMP%], .country-container[_ngcontent-%COMP%]{display:flex;gap:.5rem;align-items:center}.right[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between;margin:.5rem}.countdown-container[_ngcontent-%COMP%]{display:flex;align-items:center}.countdown[_ngcontent-%COMP%]{font-family:Trajan Pro;font-style:normal;font-weight:400;font-size:.8rem;color:#000;text-shadow:2px 2px 4px rgba(0,0,0,.25);padding:.1rem 1rem;background:var(--yellow-brand);filter:drop-shadow(2px 2px 4px rgba(0,0,0,.25));border-radius:10px}.rightbottom[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.3rem}.mode-player-container[_ngcontent-%COMP%]{display:flex;gap:1.2rem}.mode-container[_ngcontent-%COMP%], .player-container[_ngcontent-%COMP%]{display:flex;gap:.5rem;align-items:center}.fee-prize-container[_ngcontent-%COMP%]{display:flex;gap:1.2rem}.fee-container[_ngcontent-%COMP%], .prize-container[_ngcontent-%COMP%]{display:flex;gap:.5rem;align-items:center}@media only screen and (max-width: 900px){.banner[_ngcontent-%COMP%]{display:none}.countdown[_ngcontent-%COMP%]{margin-bottom:1rem}}@media only screen and (max-width: 700px){.midbottom[_ngcontent-%COMP%]{gap:.2rem}.game-host-container[_ngcontent-%COMP%], .date-country-container[_ngcontent-%COMP%]{flex-direction:column;gap:.2rem}}@media only screen and (max-width: 500px){.countdown[_ngcontent-%COMP%]{display:none}.rightbottom[_ngcontent-%COMP%]{gap:.2rem}.mode-player-container[_ngcontent-%COMP%], .fee-prize-container[_ngcontent-%COMP%]{flex-direction:column;gap:.2rem}}']})}return i})();var z=m(4506),S=m(9213),u=m(9417),Z=m(9172),A=m(8141),tt=m(5558),U=m(6354),_=m(6467),w=m(9631),I=m(6471),R=m(850),$=m(6600),E=m(5571);const et=["inputSteamId"];function nt(i,s){1&i&&(t.j41(0,"mat-form-field",12)(1,"mat-label"),t.EFF(2,"Steam ID"),t.k0s(),t.nrm(3,"input",13,0),t.j41(5,"mat-icon",14),t.EFF(6,"person_add"),t.k0s()())}function ot(i,s){if(1&i){const e=t.RV6();t.j41(0,"button",15),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.addAdminByButton())}),t.EFF(1,"Add Admin"),t.k0s()}}function it(i,s){1&i&&(t.j41(0,"mat-icon",23),t.EFF(1,"cancel"),t.k0s())}function at(i,s){if(1&i){const e=t.RV6();t.j41(0,"mat-chip",21),t.bIt("removed",function(){const n=t.eBV(e).$implicit,a=t.XpG(2);return t.Njj(a.removeUser(n))}),t.EFF(1),t.DNE(2,it,2,0,"mat-icon",22),t.k0s()}if(2&i){const e=s.$implicit;t.Y8G("removable",!0),t.R7$(),t.SpI(" ",e.name," "),t.R7$(),t.Y8G("ngIf",!0)}}function rt(i,s){if(1&i&&(t.j41(0,"mat-option",24),t.EFF(1),t.k0s()),2&i){const e=s.$implicit;t.Y8G("value",e),t.R7$(),t.SpI(" ",e.name," ")}}function st(i,s){if(1&i){const e=t.RV6();t.j41(0,"div")(1,"mat-form-field",16)(2,"mat-chip-listbox"),t.DNE(3,at,3,3,"mat-chip",17),t.nrm(4,"input",18),t.k0s()(),t.j41(5,"mat-autocomplete",19,1),t.bIt("optionSelected",function(n){t.eBV(e);const a=t.XpG();return t.Njj(a.onUserSelected(n))}),t.DNE(7,rt,2,2,"mat-option",20),t.nI1(8,"async"),t.k0s(),t.j41(9,"button",15),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.addSelectedUsers())}),t.EFF(10,"Add Selected Admins"),t.k0s()()}if(2&i){const e=t.sdS(6),o=t.XpG();t.R7$(3),t.Y8G("ngForOf",o.selectedUsers),t.R7$(),t.Y8G("formControl",o.userCtrl)("matAutocomplete",e),t.R7$(3),t.Y8G("ngForOf",t.bMT(8,4,o.filteredUsers))}}function lt(i,s){if(1&i){const e=t.RV6();t.j41(0,"mat-icon",26),t.bIt("click",function(){t.eBV(e);const n=t.XpG().index,a=t.XpG();return t.Njj(a.deleteAdminField(n))}),t.EFF(1,"delete"),t.k0s()}}function mt(i,s){if(1&i&&(t.j41(0,"div")(1,"span"),t.EFF(2),t.k0s(),t.DNE(3,lt,2,0,"mat-icon",25),t.k0s()),2&i){const e=s.$implicit;t.R7$(2),t.Lme("",e.idSteam," ",e.name,""),t.R7$(),t.Y8G("ngIf",!e.isHost)}}let ct=(()=>{class i{constructor(e,o,n){this.authService=e,this.tournamentService=o,this.steamApiService=n,this.subscriptions=[],this.registrationCriteria="User",this.userCtrl=new u.MJ,this.selectedUsers=[],this.subscriptions.push(this.tournamentService.getTournament().subscribe(a=>{this.tournament=a}))}ngOnInit(){this.setButtonStyles(),this.usersReadListObs=this.authService.getUserReadList(),this.filteredUsers=this.userCtrl.valueChanges.pipe((0,Z.Z)(""),(0,A.M)(e=>console.log("Value Changes:",e)),(0,tt.n)(e=>this._filterUsers(e)))}_filterUsers(e){if("string"!=typeof e)return this.usersReadListObs;const o=e.toLowerCase();return this.usersReadListObs.pipe((0,U.T)(n=>n.filter(a=>a.name?.toLowerCase().includes(o))))}onUserSelected(e){const o=e.option.value;this.selectedUsers.some(n=>n.idSteam===o.idSteam)||this.selectedUsers.push(o),this.userCtrl.setValue("")}removeUser(e){const o=this.selectedUsers.indexOf(e);o>=0&&this.selectedUsers.splice(o,1)}addSelectedUsers(){this.selectedUsers.forEach(e=>this.addAdminField(e.idSteam)),this.selectedUsers=[]}addAdminField(e){this.tournament.tournamentHost.some(n=>n.idSteam===e)||this.subscriptions.push(this.usersReadListObs.pipe((0,U.T)(n=>n.find(a=>a.idSteam===e)),(0,A.M)(n=>{n&&this.tournament.tournamentHost.push({id:null,idTournament:this.tournament.id,idSteam:e,name:n.name,isHost:!1})})).subscribe())}addAdminByButton(){const e=this.inputSteamId.nativeElement.value;this.subscriptions.push(this.steamApiService.getPlayerSummaries(e).subscribe(o=>{o.response.players.length>0&&this.tournament.tournamentHost.push({id:null,idTournament:this.tournament.id,idSteam:e,name:o.response.players[0].personaname,isHost:!1})}))}deleteAdminField(e){this.tournament.tournamentHost.splice(e,1)}setButtonStyles(){const e=window.innerWidth;this.buttonStyle=e<600?{"padding-left":"0.6rem","padding-right":"0.6rem","min-height":"1rem",width:"100%"}:e<900?{"padding-left":"1rem","padding-right":"1rem","min-height":"2rem",width:"100%"}:{"padding-left":"3rem","padding-right":"3rem","min-height":"2.5rem"}}Save(){this.tournamentService.save(this.tournament)}ngOnDestroy(){this.subscriptions.forEach(e=>{e.unsubscribe()})}static#t=this.\u0275fac=function(o){return new(o||i)(t.rXU(C.uR),t.rXU(P),t.rXU(T.m))};static#e=this.\u0275cmp=t.VBU({type:i,selectors:[["app-tournaments-admins"]],viewQuery:function(o,n){if(1&o&&t.GBs(et,5),2&o){let a;t.mGM(a=t.lsd())&&(n.inputSteamId=a.first)}},decls:16,vars:9,consts:[["inputSteamId",""],["auto","matAutocomplete"],[1,"form-section-title"],["name","registrationCriteria","aria-label","Registration Criteria",3,"ngModelChange","ngModel"],["value","User"],["value","Steam"],["appearance","outline",4,"ngIf"],["mat-raised-button","","color","primary",3,"click",4,"ngIf"],[4,"ngIf"],[4,"ngFor","ngForOf"],[1,"mt-20"],[1,"button",3,"OnButtonClicked","Name","InputIndex","buttonStyle","ActiveEnabled"],["appearance","outline"],["matInput",""],["matPrefix","","color","primary"],["mat-raised-button","","color","primary",3,"click"],["appearance","outline",1,"chip-list"],[3,"removable","removed",4,"ngFor","ngForOf"],["placeholder","Search admin","aria-label","Search admin","matInput","",3,"formControl","matAutocomplete"],[3,"optionSelected"],[3,"value",4,"ngFor","ngForOf"],[3,"removed","removable"],["matChipRemove","",4,"ngIf"],["matChipRemove",""],[3,"value"],["color","warn",3,"click",4,"ngIf"],["color","warn",3,"click"]],template:function(o,n){1&o&&(t.j41(0,"div",2),t.EFF(1,"Admins management:"),t.k0s(),t.j41(2,"div")(3,"mat-button-toggle-group",3),t.mxI("ngModelChange",function(r){return t.DH7(n.registrationCriteria,r)||(n.registrationCriteria=r),r}),t.j41(4,"mat-button-toggle",4),t.EFF(5,"User list"),t.k0s(),t.j41(6,"mat-button-toggle",5),t.EFF(7,"Steam ID"),t.k0s()()(),t.DNE(8,nt,7,0,"mat-form-field",6)(9,ot,2,0,"button",7)(10,st,11,6,"div",8),t.j41(11,"div",2),t.EFF(12,"Admins list:"),t.k0s(),t.DNE(13,mt,4,3,"div",9),t.j41(14,"div",10)(15,"app-custom-button",11),t.bIt("OnButtonClicked",function(){return n.Save()}),t.k0s()()),2&o&&(t.R7$(3),t.R50("ngModel",n.registrationCriteria),t.R7$(5),t.Y8G("ngIf","Steam"===n.registrationCriteria),t.R7$(),t.Y8G("ngIf","Steam"===n.registrationCriteria),t.R7$(),t.Y8G("ngIf","User"===n.registrationCriteria),t.R7$(3),t.Y8G("ngForOf",n.tournament.tournamentHost),t.R7$(2),t.Y8G("Name","Save Settings")("InputIndex",1)("buttonStyle",n.buttonStyle)("ActiveEnabled",!1))},dependencies:[c.Sq,c.bT,h.z,u.me,u.BC,u.l_,u.vS,_.rl,_.nJ,_.JW,w.fg,I.Jl,I.uI,I.Zv,S.An,R.$3,$.wT,R.pN,p.$z,E.ec,E.pc,c.Jj],styles:[".form-section-title[_ngcontent-%COMP%]{font-family:Trajan Pro;font-style:normal;font-weight:400;font-size:1rem;color:#ffc100;text-shadow:2px 2px 4px rgba(0,0,0,.25);margin-bottom:1rem;margin-top:1rem}"]})}return i})();const ut=["topContainer"],dt=["theme"],pt=["zoomWrapper"],gt=(i,s)=>({"winner-top":i,"winner-bottom":s}),_t=i=>({height:i});function ht(i,s){if(1&i){const e=t.RV6();t.j41(0,"div",5),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.enterFullScreen())}),t.j41(1,"mat-icon",6),t.EFF(2,"fullscreen"),t.k0s(),t.j41(3,"div"),t.EFF(4,"Enter fullscreen mode"),t.k0s()()}}function ft(i,s){if(1&i){const e=t.RV6();t.j41(0,"div",5),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.exitFullScreen())}),t.j41(1,"mat-icon",6),t.EFF(2,"fullscreen_exit"),t.k0s(),t.j41(3,"div"),t.EFF(4,"Exit fullscreen mode"),t.k0s()()}}function bt(i,s){if(1&i&&(t.j41(0,"div",24),t.nrm(1,"div",25)(2,"div",26),t.k0s()),2&i){const e=t.XpG(2).index,o=t.XpG();t.R7$(2),t.Y8G("ngStyle",t.eq3(1,_t,o.getLineHeight(e)))}}function Ct(i,s){1&i&&(t.j41(0,"div",27),t.nrm(1,"div",25),t.k0s())}function vt(i,s){if(1&i&&(t.j41(0,"div",15)(1,"div",16),t.nrm(2,"span",17),t.j41(3,"span",18),t.EFF(4),t.k0s(),t.j41(5,"span",19),t.EFF(6),t.k0s(),t.j41(7,"span",20),t.EFF(8),t.k0s()(),t.j41(9,"div",21),t.nrm(10,"span",17),t.j41(11,"span",18),t.EFF(12),t.k0s(),t.j41(13,"span",19),t.EFF(14),t.k0s(),t.j41(15,"span",20),t.EFF(16),t.k0s()(),t.DNE(17,bt,3,3,"div",22)(18,Ct,2,0,"div",23),t.k0s()),2&i){const e=s.$implicit,o=t.XpG().index,n=t.XpG();t.Y8G("ngClass",t.l_i(9,gt,e.matchTop.score>e.matchBottom.score,e.matchBottom.score>e.matchTop.score)),t.R7$(4),t.JRh(e.matchTop.seed),t.R7$(2),t.JRh(e.matchTop.name),t.R7$(2),t.JRh(e.matchTop.score),t.R7$(4),t.JRh(e.matchBottom.seed),t.R7$(2),t.JRh(e.matchBottom.name),t.R7$(2),t.JRh(e.matchBottom.score),t.R7$(),t.Y8G("ngIf",o<n.bracket.length-1),t.R7$(),t.Y8G("ngIf",o>0)}}function yt(i,s){if(1&i&&(t.qex(0),t.j41(1,"div")(2,"div",12),t.EFF(3),t.k0s(),t.j41(4,"div",13),t.DNE(5,vt,19,12,"div",14),t.k0s()(),t.bVm()),2&i){const e=s.$implicit;t.R7$(3),t.SpI(" ",e.name," "),t.R7$(2),t.Y8G("ngForOf",e.matches)}}let xt=(()=>{class i{constructor(e){this.renderer=e,this.scale=1,this.originX=0,this.originY=0,this.isDragging=!1,this.lastX=0,this.lastY=0,this.translateX=0,this.translateY=0,this.isFullScreen=!1}ngAfterViewInit(){setTimeout(()=>{this.setContainerHeight()},0),window.addEventListener("resize",()=>{this.setContainerHeight()}),this.zoomWrapper.nativeElement.addEventListener("wheel",e=>this.onWheel(e)),this.zoomWrapper.nativeElement.addEventListener("mousedown",e=>this.onMouseDown(e)),window.addEventListener("mousemove",e=>this.onMouseMove(e)),window.addEventListener("mouseup",()=>this.onMouseUp())}setContainerHeight(){this.theme&&this.topContainer&&this.renderer.setStyle(this.topContainer.nativeElement,"height",`${this.theme.nativeElement.offsetHeight}px`)}getLineHeight(e){return 44*Math.pow(2,e)+"px"}onWheel(e){if(e.ctrlKey){e.preventDefault();const o=this.zoomWrapper.nativeElement.getBoundingClientRect(),n=e.clientX-o.left,a=e.clientY-o.top;e.deltaY<0?this.scale*=1.1:this.scale/=1.1,this.originX=n/this.zoomWrapper.nativeElement.clientWidth*100,this.originY=a/this.zoomWrapper.nativeElement.clientHeight*100,this.applyTransform()}}onMouseDown(e){1===e.button&&(e.preventDefault(),this.isDragging=!0,this.lastX=e.clientX,this.lastY=e.clientY,this.renderer.addClass(this.zoomWrapper.nativeElement,"dragging"))}onMouseMove(e){if(this.isDragging){const o=e.clientX-this.lastX,n=e.clientY-this.lastY;this.lastX=e.clientX,this.lastY=e.clientY,this.translateX+=o,this.translateY+=n,this.applyTransform()}}onMouseUp(){this.isDragging&&(this.isDragging=!1,this.renderer.removeClass(this.zoomWrapper.nativeElement,"dragging"))}applyTransform(){this.renderer.setStyle(this.topContainer.nativeElement,"transform-origin",`${this.originX}% ${this.originY}%`),this.renderer.setStyle(this.topContainer.nativeElement,"transform",`scale(${this.scale}) translate(${this.translateX}px, ${this.translateY}px)`)}resetView(){this.scale=1,this.originX=0,this.originY=0,this.translateX=0,this.translateY=0,this.applyTransform()}enterFullScreen(){this.isFullScreen=!0,this.renderer.addClass(this.zoomWrapper.nativeElement,"full-screen"),this.renderer.addClass(this.topContainer.nativeElement,"bracket-fullscreen"),this.resetView()}exitFullScreen(){this.isFullScreen=!1,this.renderer.removeClass(this.zoomWrapper.nativeElement,"full-screen"),this.renderer.removeClass(this.topContainer.nativeElement,"bracket-fullscreen"),this.resetView()}static#t=this.\u0275fac=function(o){return new(o||i)(t.rXU(t.sFG))};static#e=this.\u0275cmp=t.VBU({type:i,selectors:[["app-tournaments-bracket-viewer"]],viewQuery:function(o,n){if(1&o&&(t.GBs(ut,5),t.GBs(dt,5),t.GBs(pt,5)),2&o){let a;t.mGM(a=t.lsd())&&(n.topContainer=a.first),t.mGM(a=t.lsd())&&(n.theme=a.first),t.mGM(a=t.lsd())&&(n.zoomWrapper=a.first)}},inputs:{bracket:"bracket"},decls:16,vars:3,consts:[["zoomWrapper",""],["topContainer",""],["theme",""],[1,"zoom-wrapper"],[1,"controls"],[1,"button-container","dark-bg","rounded",3,"click"],["color","primary"],["class","button-container dark-bg rounded",3,"click",4,"ngIf"],[1,"top-container"],[1,"theme","theme-dark"],[1,"bracket","disable-image"],[4,"ngFor","ngForOf"],[1,"match-top","team",2,"text-align","center","background-color","rgb(124, 124, 124)","margin-right","24px","color","white"],[1,"column"],["class","match",3,"ngClass",4,"ngFor","ngForOf"],[1,"match",3,"ngClass"],[1,"match-top","team"],[1,"image"],[1,"seed"],[1,"name"],[1,"score"],[1,"match-bottom","team"],["class","match-lines",4,"ngIf"],["class","match-lines alt",4,"ngIf"],[1,"match-lines"],[1,"line","one"],[1,"line","two",3,"ngStyle"],[1,"match-lines","alt"]],template:function(o,n){if(1&o){const a=t.RV6();t.j41(0,"div",3,0)(2,"div",4)(3,"div",5),t.bIt("click",function(){return t.eBV(a),t.Njj(n.resetView())}),t.j41(4,"mat-icon",6),t.EFF(5,"restart_alt"),t.k0s(),t.j41(6,"div"),t.EFF(7,"Reset Position"),t.k0s()(),t.DNE(8,ht,5,0,"div",7)(9,ft,5,0,"div",7),t.k0s(),t.j41(10,"div",8,1)(12,"div",9,2)(14,"div",10),t.DNE(15,yt,6,2,"ng-container",11),t.k0s()()()()}2&o&&(t.R7$(8),t.Y8G("ngIf",!n.isFullScreen),t.R7$(),t.Y8G("ngIf",n.isFullScreen),t.R7$(6),t.Y8G("ngForOf",n.bracket))},dependencies:[c.YU,c.Sq,c.bT,c.B3,S.An],styles:[".zoom-wrapper[_ngcontent-%COMP%]{overflow:hidden;position:relative}.controls[_ngcontent-%COMP%]{position:relative;top:0;left:0;z-index:1000;display:flex;padding-left:.5rem}.button-container[_ngcontent-%COMP%]{display:flex;padding:1rem;margin-right:1rem;background:#454545f2}.button-container[_ngcontent-%COMP%]:hover{transform:scale(102%);background-color:#595959f2}.controls[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{transform:scale(1.5);margin-right:1rem}.top-container[_ngcontent-%COMP%]{position:relative;transform-origin:0 0;transition:transform .2s ease;margin-top:2rem}.dragging[_ngcontent-%COMP%]{cursor:grabbing!important}.full-screen[_ngcontent-%COMP%]   .controls[_ngcontent-%COMP%]{position:fixed;top:10px;left:10px}.full-screen[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;z-index:999;background-color:#252525}.theme[_ngcontent-%COMP%]{position:absolute}.bracket[_ngcontent-%COMP%]{display:flex;flex-direction:row;position:relative;margin-top:.2rem}.bracket-fullscreen[_ngcontent-%COMP%]{margin-left:1rem;margin-top:5rem}.column[_ngcontent-%COMP%]{display:flex;flex-direction:column;min-height:100%;justify-content:space-around;align-content:center}.match[_ngcontent-%COMP%]{position:relative;display:flex;flex-direction:column;min-width:240px;max-width:240px;height:62px;margin:12px 24px 12px 0}.match[_ngcontent-%COMP%]   .match-top[_ngcontent-%COMP%]{border-radius:2px 2px 0 0}.match[_ngcontent-%COMP%]   .match-bottom[_ngcontent-%COMP%]{border-radius:0 0 2px 2px}.match[_ngcontent-%COMP%]   .team[_ngcontent-%COMP%]{display:flex;align-items:center;width:100%;height:100%;border:1px solid black;position:relative}.match[_ngcontent-%COMP%]   .team[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{padding-left:8px}.match[_ngcontent-%COMP%]   .team[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:last-child{padding-right:8px}.match[_ngcontent-%COMP%]   .team[_ngcontent-%COMP%]   .score[_ngcontent-%COMP%]{margin-left:auto}.match[_ngcontent-%COMP%]   .team[_ngcontent-%COMP%]:first-child{margin-bottom:-1px}.match-lines[_ngcontent-%COMP%]{display:block;position:absolute;top:50%;bottom:0;margin-top:0;right:-1px}.match-lines[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]{background:red;position:absolute}.match-lines[_ngcontent-%COMP%]   .line.one[_ngcontent-%COMP%]{height:1px;width:12px}.match-lines[_ngcontent-%COMP%]   .line.two[_ngcontent-%COMP%]{height:44px;width:1px;left:11px}.match-lines.alt[_ngcontent-%COMP%]{left:-12px}.match[_ngcontent-%COMP%]:nth-child(2n)   .match-lines[_ngcontent-%COMP%]   .line.two[_ngcontent-%COMP%]{transform:translateY(-100%)}.column[_ngcontent-%COMP%]:first-child   .match-lines.alt[_ngcontent-%COMP%]{display:none}.column[_ngcontent-%COMP%]:last-child   .match-lines[_ngcontent-%COMP%]{display:none}.column[_ngcontent-%COMP%]:last-child   .match-lines.alt[_ngcontent-%COMP%]{display:block}.column[_ngcontent-%COMP%]:nth-child(2)   .match-lines[_ngcontent-%COMP%]   .line.two[_ngcontent-%COMP%]{height:88px}.column[_ngcontent-%COMP%]:nth-child(3)   .match-lines[_ngcontent-%COMP%]   .line.two[_ngcontent-%COMP%]{height:175px}.column[_ngcontent-%COMP%]:nth-child(4)   .match-lines[_ngcontent-%COMP%]   .line.two[_ngcontent-%COMP%]{height:262px}.column[_ngcontent-%COMP%]:nth-child(5)   .match-lines[_ngcontent-%COMP%]   .line.two[_ngcontent-%COMP%]{height:349px}.disable-image[_ngcontent-%COMP%]   .image[_ngcontent-%COMP%], .disable-seed[_ngcontent-%COMP%]   .seed[_ngcontent-%COMP%], .disable-name[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%], .disable-score[_ngcontent-%COMP%]   .score[_ngcontent-%COMP%]{display:none!important}.disable-borders[_ngcontent-%COMP%], .disable-borders[_ngcontent-%COMP%]   .team[_ngcontent-%COMP%]{border-width:0px!important}.disable-seperator[_ngcontent-%COMP%]   .match-top[_ngcontent-%COMP%]{border-bottom:0px!important}.disable-seperator[_ngcontent-%COMP%]   .match-bottom[_ngcontent-%COMP%]{border-top:0px!important}.disable-seperator[_ngcontent-%COMP%]   .team[_ngcontent-%COMP%]:first-child{margin-bottom:0}.round[_ngcontent-%COMP%]{display:flex}.theme-dark[_ngcontent-%COMP%]{border-color:#040607}.theme-dark[_ngcontent-%COMP%]   .match-lines[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]{background:#36404e}.theme-dark[_ngcontent-%COMP%]   .team[_ngcontent-%COMP%]{background:#182026;border-color:#232c36;color:#6b798c}.theme-dark[_ngcontent-%COMP%]   .winner-top[_ngcontent-%COMP%]   .match-top[_ngcontent-%COMP%], .theme-dark[_ngcontent-%COMP%]   .winner-bottom[_ngcontent-%COMP%]   .match-bottom[_ngcontent-%COMP%]{background:#232c36;color:#e3e8ef;border-color:#36404e;z-index:1}.theme-dark[_ngcontent-%COMP%]   .winner-top[_ngcontent-%COMP%]   .match-top[_ngcontent-%COMP%]   .score[_ngcontent-%COMP%], .theme-dark[_ngcontent-%COMP%]   .winner-bottom[_ngcontent-%COMP%]   .match-bottom[_ngcontent-%COMP%]   .score[_ngcontent-%COMP%]{color:#03d9ce}.theme-dark[_ngcontent-%COMP%]   .match[_ngcontent-%COMP%]   .seed[_ngcontent-%COMP%]{font-size:12px;min-width:10px}.theme-dark[_ngcontent-%COMP%]   .match[_ngcontent-%COMP%]   .score[_ngcontent-%COMP%]{font-size:14px}"]})}return i})();const Tt=["viewContainer"],kt=["bracketViewer"];let Mt=(()=>{class i{constructor(e){this.tournamentService=e,this.seedingMode="random",this.bracket=[{name:"XX",matches:[{matchTop:{seed:1,name:"KavernaTV",score:2},matchBottom:{seed:8,name:"Batunham",score:1}},{matchTop:{seed:4,name:"Shake2020",score:1},matchBottom:{seed:5,name:"KrispyK",score:2}},{matchTop:{seed:2,name:"Morlezan",score:2},matchBottom:{seed:7,name:"LopsidedFluff",score:0}},{matchTop:{seed:3,name:"Kynesie",score:2},matchBottom:{seed:6,name:"Bronchy",score:1}},{matchTop:{seed:1,name:"KavernaTV",score:2},matchBottom:{seed:8,name:"Batunham",score:1}},{matchTop:{seed:4,name:"Shake2020",score:1},matchBottom:{seed:5,name:"KrispyK",score:2}},{matchTop:{seed:2,name:"Morlezan",score:2},matchBottom:{seed:7,name:"LopsidedFluff",score:0}},{matchTop:{seed:3,name:"Kynesie",score:2},matchBottom:{seed:6,name:"Bronchy",score:1}}]}],this.subscription=this.tournamentService.getTournament().subscribe(o=>{this.tournament=o})}ngOnInit(){this.setButtonStyles()}ngAfterViewInit(){}generate_bracket(){let e=[...this.tournament.tournamentPlayers];"byrating"===this.seedingMode?(e.sort((o,n)=>(n.eloSnapshot||0)-(o.eloSnapshot||0)),e=this.assignSeeds(e)):"random"===this.seedingMode&&(e=this.shuffleArray(e)),e=this.addByes(e),this.bracket=this.createBracket(e)}assignSeeds(e){return e.map((o,n)=>({...o,seed:n+1}))}shuffleArray(e){for(let o=e.length-1;o>0;o--){const n=Math.floor(Math.random()*(o+1));[e[o],e[n]]=[e[n],e[o]]}return e}addByes(e){const o=e.length,a=Math.pow(2,Math.ceil(Math.log2(o)))-o;for(let r=0;r<a;r++)e.push({id:null,idTournament:null,idPlayer:null,idTeam:null,seed:e.length+1,eloSnapshot:null,teamName:null,name:"BYE",idSteam:null});return e}createBracket(e){const o=[],n=e.length,a=Math.ceil(Math.log2(n)),r=this.getRoundNames(a);for(let l=0;l<a;l++)o.push({name:r[l],matches:this.createEmptyMatches(n/Math.pow(2,l+1))});return this.fillFirstRound(o[0],e),o}createEmptyMatches(e){const o=[];for(let n=0;n<e;n++)o.push({matchTop:{seed:0,name:"",score:0},matchBottom:{seed:0,name:"",score:0}});return o}getRoundNames(e){const o=[];for(let n=0;n<e;n++)o.push(n===e-1?"Final":n===e-2?"Semi":n===e-3?"Quarter":`Ro${Math.pow(2,e-n)}`);return o}fillFirstRound(e,o){const n=e.matches,r=this.getSeedPositions(o.length);for(let l=0;l<r.length;l++){const x=r[l];n[x.matchIndex][x.position]={seed:o[l].seed??0,name:o[l].name??"",score:0}}}getSeedPositions(e){return[{matchIndex:0,position:"matchTop"},{matchIndex:7,position:"matchTop"},{matchIndex:3,position:"matchTop"},{matchIndex:4,position:"matchTop"},{matchIndex:2,position:"matchTop"},{matchIndex:5,position:"matchTop"},{matchIndex:1,position:"matchTop"},{matchIndex:6,position:"matchTop"},{matchIndex:0,position:"matchBottom"},{matchIndex:7,position:"matchBottom"},{matchIndex:3,position:"matchBottom"},{matchIndex:4,position:"matchBottom"},{matchIndex:2,position:"matchBottom"},{matchIndex:5,position:"matchBottom"},{matchIndex:1,position:"matchBottom"},{matchIndex:6,position:"matchBottom"}]}setButtonStyles(){const e=window.innerWidth;this.buttonStyle=e<600?{"padding-left":"0.6rem","padding-right":"0.6rem","min-height":"1rem",width:"100%"}:e<900?{"padding-left":"1rem","padding-right":"1rem","min-height":"2rem",width:"100%"}:{"padding-left":"3rem","padding-right":"3rem","min-height":"2.5rem"}}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}static#t=this.\u0275fac=function(o){return new(o||i)(t.rXU(P))};static#e=this.\u0275cmp=t.VBU({type:i,selectors:[["app-tournaments-bracket"]],viewQuery:function(o,n){if(1&o&&(t.GBs(Tt,5),t.GBs(kt,5)),2&o){let a;t.mGM(a=t.lsd())&&(n.viewContainerRef=a.first),t.mGM(a=t.lsd())&&(n.bracketViewerRef=a.first)}},decls:15,vars:6,consts:[[1,"form-container"],[1,"form-section-title"],[1,"seeding-container"],["name","seedingMode","aria-label","Seeding Mode",3,"ngModelChange","ngModel"],["value","manual"],["value","random"],["value","byrating"],[1,"button",3,"OnButtonClicked","Name","InputIndex","buttonStyle","ActiveEnabled"],[3,"bracket"]],template:function(o,n){1&o&&(t.j41(0,"div",0)(1,"div",1),t.EFF(2,"Seeding Mode"),t.k0s(),t.j41(3,"div",2)(4,"mat-button-toggle-group",3),t.mxI("ngModelChange",function(r){return t.DH7(n.seedingMode,r)||(n.seedingMode=r),r}),t.j41(5,"mat-button-toggle",4),t.EFF(6,"Manual"),t.k0s(),t.j41(7,"mat-button-toggle",5),t.EFF(8,"Random"),t.k0s(),t.j41(9,"mat-button-toggle",6),t.EFF(10,"By Rating"),t.k0s()()(),t.j41(11,"app-custom-button",7),t.bIt("OnButtonClicked",function(){return n.generate_bracket()}),t.k0s(),t.j41(12,"div",1),t.EFF(13,"Tournament Bracket"),t.k0s(),t.nrm(14,"app-tournaments-bracket-viewer",8),t.k0s()),2&o&&(t.R7$(4),t.R50("ngModel",n.seedingMode),t.R7$(7),t.Y8G("Name","Generate bracket")("InputIndex",1)("buttonStyle",n.buttonStyle)("ActiveEnabled",!1),t.R7$(3),t.Y8G("bracket",n.bracket))},dependencies:[h.z,u.BC,u.vS,E.ec,E.pc,xt],styles:[".form-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex:1;flex-wrap:wrap;position:relative}.form-section-title[_ngcontent-%COMP%]{font-family:Trajan Pro;font-style:normal;font-weight:400;font-size:1rem;color:#ffc100;text-shadow:2px 2px 4px rgba(0,0,0,.25);margin-bottom:1rem;margin-top:1rem}.seeding-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;margin-bottom:1rem}.mat-button-toggle-group[_ngcontent-%COMP%]{border:2px solid #aaa;border-radius:5px;gap:2px;padding:2px}.mat-button-toggle[_ngcontent-%COMP%]{font-family:Trajan Pro;font-size:1rem;color:#fff;background-color:#454545;line-height:1!important;letter-spacing:1!important}.mat-button-toggle[_ngcontent-%COMP%]:first-child{border-top-left-radius:3px;border-bottom-left-radius:3px}.mat-button-toggle[_ngcontent-%COMP%]:last-child{border-top-right-radius:3px;border-bottom-right-radius:3px}.mat-button-toggle-checked[_ngcontent-%COMP%]{background-color:var(--yellow-brand)!important;color:#000!important}.bracket-container[_ngcontent-%COMP%]{display:flex}.round-container[_ngcontent-%COMP%]{display:flex;flex-direction:column}.round[_ngcontent-%COMP%]{font-family:Source Sans 3;font-weight:700;font-size:1rem;text-align:center}.seed-container[_ngcontent-%COMP%]{position:relative;display:flex;flex-direction:column;border:2px solid #aaa;border-radius:5px;padding:2px;gap:2px;z-index:1;transition-duration:.1s}.seed-container[_ngcontent-%COMP%]:hover, .seed-container[_ngcontent-%COMP%]:hover   .seed[_ngcontent-%COMP%]{border:2px solid var(--yellow-brand);transition-duration:.1s}.seed-container[_ngcontent-%COMP%]:active{scale:1;transition-duration:.1s}.seed[_ngcontent-%COMP%]{position:absolute;top:50%;left:-12px;transform:translateY(-50%);width:1.5rem;height:1.5rem;background-color:#181818;border:2px solid #aaa;border-radius:50%;box-shadow:2px 2px 4px #00000025;z-index:2;text-align:center}.player-container[_ngcontent-%COMP%]{position:relative;display:flex;flex-direction:row}.player[_ngcontent-%COMP%]{display:flex;flex:1;background-color:#454545;padding:.5rem 5rem .5rem 1rem;font-family:Trajan Pro;font-weight:400;font-size:1rem;text-shadow:2px 2px 4px #00000025;gap:1rem}.player[_ngcontent-%COMP%]:hover{background-color:var(--yellow-brand-hover)}.check[_ngcontent-%COMP%]{color:#000;font-size:1rem;text-shadow:2px 2px 4px #00000025;transform:translateY(20%)}.result[_ngcontent-%COMP%]{display:flex;background-color:var(--yellow-brand);padding:.5rem 1rem;color:#000;font-family:Trajan Pro;font-weight:400;font-size:1rem;text-shadow:2px 2px 4px #00000025}.tl-r[_ngcontent-%COMP%]{border-top-left-radius:3px}.tr-r[_ngcontent-%COMP%]{border-top-right-radius:3px}.bl-r[_ngcontent-%COMP%]{border-bottom-left-radius:3px}.br-r[_ngcontent-%COMP%]{border-bottom-right-radius:3px}.view-container[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;position:relative}.app-tournaments-bracket-viewer[_ngcontent-%COMP%]{flex:1}"]})}return i})();var Pt=m(2427),St=m(5596),L=m(6195);const Ft=["inputSteamId"];function jt(i,s){1&i&&(t.j41(0,"mat-form-field",16)(1,"mat-label"),t.EFF(2,"Steam ID"),t.k0s(),t.nrm(3,"input",17,0),t.j41(5,"mat-icon",18),t.EFF(6,"person_add"),t.k0s()())}function Ot(i,s){if(1&i){const e=t.RV6();t.j41(0,"button",19),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.addPlayerByButton())}),t.EFF(1,"Add Participant"),t.k0s()}}function It(i,s){1&i&&(t.j41(0,"mat-icon",27),t.EFF(1,"cancel"),t.k0s())}function Rt(i,s){if(1&i){const e=t.RV6();t.j41(0,"mat-chip",25),t.bIt("removed",function(){const n=t.eBV(e).$implicit,a=t.XpG(2);return t.Njj(a.removePlayer(n))}),t.EFF(1),t.DNE(2,It,2,0,"mat-icon",26),t.k0s()}if(2&i){const e=s.$implicit;t.Y8G("removable",!0),t.R7$(),t.SpI(" ",e.name," "),t.R7$(),t.Y8G("ngIf",!0)}}function Et(i,s){if(1&i&&(t.j41(0,"mat-option",28),t.EFF(1),t.k0s()),2&i){const e=s.$implicit;t.Y8G("value",e),t.R7$(),t.SpI(" ",e.name," ")}}function wt(i,s){if(1&i){const e=t.RV6();t.j41(0,"div")(1,"mat-form-field",20)(2,"mat-chip-listbox"),t.DNE(3,Rt,3,3,"mat-chip",21),t.j41(4,"input",22),t.bIt("ngModelChange",function(n){t.eBV(e);const a=t.XpG();return t.Njj(a.filterPlayers(n))}),t.k0s()()(),t.j41(5,"mat-autocomplete",23,1),t.bIt("optionSelected",function(n){t.eBV(e);const a=t.XpG();return t.Njj(a.onPlayerSelected(n))}),t.DNE(7,Et,2,2,"mat-option",24),t.k0s(),t.j41(8,"button",19),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.addSelectedPlayers())}),t.EFF(9,"Add Selected Participants"),t.k0s()()}if(2&i){const e=t.sdS(6),o=t.XpG();t.R7$(3),t.Y8G("ngForOf",o.selectedPlayers),t.R7$(),t.Y8G("formControl",o.userCtrl)("matAutocomplete",e),t.R7$(3),t.Y8G("ngForOf",o.filteredPlayers)}}function Bt(i,s){if(1&i){const e=t.RV6();t.j41(0,"mat-grid-tile")(1,"mat-card",29)(2,"div",30)(3,"span"),t.EFF(4),t.k0s(),t.EFF(5),t.j41(6,"mat-icon",31),t.bIt("click",function(){const n=t.eBV(e).index,a=t.XpG();return t.Njj(a.deleteAdminField(n))}),t.EFF(7," delete "),t.k0s()()()()}if(2&i){const e=s.$implicit;t.R7$(4),t.SpI(" ",e.name," "),t.R7$(),t.SpI(" ( ",e.eloSnapshot," ) ")}}let Nt=(()=>{class i{constructor(e,o,n,a){this.authService=e,this.tournamentService=o,this.steamApiService=n,this.leaderboardService=a,this.subscriptions=[],this.registrationCriteria="User",this.userCtrl=new u.MJ,this.filteredPlayers=[],this.selectedPlayers=[],this.subscriptions.push(this.tournamentService.getTournament().subscribe(r=>{this.tournament=r}))}ngOnInit(){this.setButtonStyles(),this.getPlayerList()}filterPlayers(e){this.filteredPlayers=this.playerList&&"string"==typeof e&&""!==e.trim()?this.playerList.filter(o=>o&&o.name&&o.name.toLowerCase().includes(e.toLowerCase().trim())).slice(0,25):this.playerList.slice(0,25)}onPlayerSelected(e){const o=e.option.value;this.selectedPlayers.some(n=>n.idPlayer===o.idPlayer)||this.selectedPlayers.push(o),this.userCtrl.setValue("")}update_elo(){let e=[];this.tournament.tournamentPlayers.forEach(o=>o.idPlayer?e.push(o.idPlayer):null),this.subscriptions.push(this.leaderboardService.getEloForList(e,this.tournament.gameMode).subscribe(o=>{o.forEach(n=>{let a=this.tournament.tournamentPlayers.find(r=>r.idPlayer===n.idPlayer);a&&(a.eloSnapshot=n.elo)})}))}removePlayer(e){const o=this.selectedPlayers.indexOf(e);this.selectedPlayers.splice(o,1)}addSelectedPlayers(){this.selectedPlayers.forEach(e=>this.addPlayerField(e)),this.selectedPlayers=[]}addPlayerField(e){this.tournament.tournamentPlayers.some(n=>n.idPlayer===e.idPlayer)||this.tournament.tournamentPlayers.push({id:null,idTournament:this.tournament.id,idPlayer:e.idPlayer,idTeam:null,seed:null,eloSnapshot:null,teamName:null,idSteam:null,name:e.name})}addPlayerByButton(){const e=this.inputSteamId.nativeElement.value;this.subscriptions.push(this.steamApiService.getPlayerSummaries(e).subscribe(o=>{o.response.players.length>0&&this.tournament.tournamentPlayers.push({id:null,idTournament:this.tournament.id,idPlayer:null,idTeam:null,seed:null,eloSnapshot:null,teamName:null,idSteam:e,name:o.response.players[0].personaname})}))}deleteAdminField(e){this.tournament.tournamentPlayers.splice(e,1)}setButtonStyles(){const e=window.innerWidth;this.buttonStyle=e<600?{"padding-left":"0.6rem","padding-right":"0.6rem","min-height":"1rem",width:"100%"}:e<900?{"padding-left":"1rem","padding-right":"1rem","min-height":"2rem",width:"100%"}:{"padding-left":"3rem","padding-right":"3rem","min-height":"2.5rem"}}Save(){this.tournamentService.save(this.tournament)}getPlayerList(){this.subscriptions.push(this.leaderboardService.getPlayerList().subscribe({next:this.handleResponsePlayer.bind(this),error:this.handleErrorPlayer.bind(this)}))}handleResponsePlayer(e){var o=this;return(0,b.A)(function*(){e&&(o.playerList=e,o.sortFilteredListByGameMode())})()}handleErrorPlayer(e){console.error("There was an error fetching the player list data",e)}sortFilteredListByGameMode(){if(this.playerList){this.playerList.sort((o,n)=>this.compareRank(o.rank,n.rank));for(let o=0;o<1;o++)this.filteredPlayers=this.playerList.slice(0,25)}}compareRank(e,o){return null==e?1:null==o?-1:e-o}ngOnDestroy(){this.subscriptions.forEach(e=>{e.unsubscribe()})}static#t=this.\u0275fac=function(o){return new(o||i)(t.rXU(C.uR),t.rXU(P),t.rXU(T.m),t.rXU(Pt.x))};static#e=this.\u0275cmp=t.VBU({type:i,selectors:[["app-tournaments-participants"]],viewQuery:function(o,n){if(1&o&&t.GBs(Ft,5),2&o){let a;t.mGM(a=t.lsd())&&(n.inputSteamId=a.first)}},decls:27,vars:13,consts:[["inputSteamId",""],["auto","matAutocomplete"],[1,"form-container"],[1,"form-section-title"],["appearance","outline","subscriptSizing","dynamic"],["matInput","","disabled","","value","Up to 4"],[1,"mt-20"],[1,"button",3,"OnButtonClicked","Name","InputIndex","buttonStyle","ActiveEnabled"],["name","registrationCriteria","aria-label","Registration Criteria",3,"ngModelChange","ngModel"],["value","Player"],["value","Steam"],["appearance","outline",4,"ngIf"],["mat-raised-button","","color","primary",3,"click",4,"ngIf"],[4,"ngIf"],["cols","4","rowHeight","100px"],[4,"ngFor","ngForOf"],["appearance","outline"],["matInput",""],["matPrefix","","color","primary"],["mat-raised-button","","color","primary",3,"click"],["appearance","outline",1,"chip-list"],[3,"removable","removed",4,"ngFor","ngForOf"],["placeholder","Search admin","aria-label","Search admin","matInput","",3,"ngModelChange","formControl","matAutocomplete"],[3,"optionSelected"],[3,"value",4,"ngFor","ngForOf"],[3,"removed","removable"],["matChipRemove","",4,"ngIf"],["matChipRemove",""],[3,"value"],["appearance","outlined",1,"player-card"],[1,"player-info"],["color","warn",1,"delete-icon",3,"click"]],template:function(o,n){1&o&&(t.j41(0,"div",2)(1,"div",3),t.EFF(2,"Participant Registration:"),t.k0s(),t.j41(3,"mat-form-field",4)(4,"mat-label"),t.EFF(5,"Participants"),t.k0s(),t.nrm(6,"input",5)(7,"mat-hint"),t.k0s(),t.j41(8,"div",6)(9,"app-custom-button",7),t.bIt("OnButtonClicked",function(){return n.update_elo()}),t.k0s()(),t.j41(10,"div",3),t.EFF(11,"Participant management:"),t.k0s(),t.j41(12,"div")(13,"mat-button-toggle-group",8),t.mxI("ngModelChange",function(r){return t.DH7(n.registrationCriteria,r)||(n.registrationCriteria=r),r}),t.j41(14,"mat-button-toggle",9),t.EFF(15,"User list"),t.k0s(),t.j41(16,"mat-button-toggle",10),t.EFF(17,"Steam ID"),t.k0s()()(),t.DNE(18,jt,7,0,"mat-form-field",11)(19,Ot,2,0,"button",12)(20,wt,10,4,"div",13),t.j41(21,"div",3),t.EFF(22,"Participant list:"),t.k0s(),t.j41(23,"mat-grid-list",14),t.DNE(24,Bt,8,2,"mat-grid-tile",15),t.k0s()(),t.j41(25,"div",6)(26,"app-custom-button",7),t.bIt("OnButtonClicked",function(){return n.Save()}),t.k0s()()),2&o&&(t.R7$(9),t.Y8G("Name","update elo")("InputIndex",1)("buttonStyle",n.buttonStyle)("ActiveEnabled",!1),t.R7$(4),t.R50("ngModel",n.registrationCriteria),t.R7$(5),t.Y8G("ngIf","Steam"===n.registrationCriteria),t.R7$(),t.Y8G("ngIf","Steam"===n.registrationCriteria),t.R7$(),t.Y8G("ngIf","Player"===n.registrationCriteria),t.R7$(4),t.Y8G("ngForOf",n.tournament.tournamentPlayers),t.R7$(2),t.Y8G("Name","Save players")("InputIndex",1)("buttonStyle",n.buttonStyle)("ActiveEnabled",!1))},dependencies:[c.Sq,c.bT,h.z,u.me,u.BC,u.l_,u.vS,_.rl,_.nJ,_.MV,_.JW,w.fg,I.Jl,I.uI,I.Zv,S.An,R.$3,$.wT,R.pN,p.$z,St.RN,L.B_,L.NS,E.ec,E.pc],styles:[".form-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex:1;flex-wrap:wrap}.form-section-title[_ngcontent-%COMP%]{font-family:Trajan Pro;font-style:normal;font-weight:400;font-size:1rem;color:#ffc100;text-shadow:2px 2px 4px rgba(0,0,0,.25);margin-bottom:1rem;margin-top:1rem}.participant-row[_ngcontent-%COMP%]{display:flex;gap:1rem}.participant-field[_ngcontent-%COMP%]{display:flex;flex:1;flex-direction:row;gap:1rem}mat-form-field[_ngcontent-%COMP%]{flex:1}mat-button-toggle-group[_ngcontent-%COMP%]{margin-top:.2rem}.player-card[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:8px}.player-info[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;width:100%}.delete-icon[_ngcontent-%COMP%]{cursor:pointer}"]})}return i})();const X=(i,s)=>({"arrow-color":i,disabled:s});function Gt(i,s){if(1&i){const e=t.RV6();t.j41(0,"button",27),t.bIt("click",function(){t.eBV(e);const n=t.XpG().$implicit;return t.Njj(n.title="")}),t.j41(1,"mat-icon"),t.EFF(2,"close"),t.k0s()()}}function $t(i,s){if(1&i){const e=t.RV6();t.j41(0,"button",28),t.bIt("click",function(){t.eBV(e);const n=t.XpG().$implicit;return t.Njj(n.content="")}),t.j41(1,"mat-icon"),t.EFF(2,"close"),t.k0s()()}}function Vt(i,s){if(1&i){const e=t.RV6();t.qex(0),t.j41(1,"div",15)(2,"div",16)(3,"mat-form-field",17)(4,"mat-label"),t.EFF(5,"Section Title"),t.k0s(),t.j41(6,"input",18),t.mxI("ngModelChange",function(n){const a=t.eBV(e).$implicit;return t.DH7(a.title,n)||(a.title=n),t.Njj(n)}),t.k0s(),t.DNE(7,Gt,3,0,"button",19),t.k0s(),t.j41(8,"mat-form-field",20)(9,"mat-label"),t.EFF(10,"Section Information"),t.k0s(),t.j41(11,"textarea",21),t.mxI("ngModelChange",function(n){const a=t.eBV(e).$implicit;return t.DH7(a.content,n)||(a.content=n),t.Njj(n)}),t.k0s(),t.DNE(12,$t,3,0,"button",22),t.j41(13,"mat-hint",23),t.EFF(14),t.k0s()()(),t.j41(15,"div",24)(16,"div",25)(17,"mat-icon",26),t.bIt("click",function(){const n=t.eBV(e).index,a=t.XpG();return t.Njj(n>0&&a.moveRuleUp(n))}),t.EFF(18," keyboard_arrow_upward "),t.k0s(),t.j41(19,"mat-icon",26),t.bIt("click",function(){const n=t.eBV(e).index,a=t.XpG();return t.Njj(n<a.tournament.tournamentRules.length-1&&a.moveRuleDown(n))}),t.EFF(20," keyboard_arrow_downward "),t.k0s()()()(),t.bVm()}if(2&i){const e=s.$implicit,o=s.index,n=t.XpG();t.R7$(6),t.R50("ngModel",e.title),t.R7$(),t.Y8G("ngIf",e.title),t.R7$(),t.Y8G("ngClass",o!==n.tournament.tournamentRules.length-1?"rules-info":""),t.R7$(3),t.R50("ngModel",e.content),t.R7$(),t.Y8G("ngIf",e.content),t.R7$(2),t.Lme("",e.content.length,"/",n.maxCharacters," characters"),t.R7$(3),t.Y8G("ngClass",t.l_i(9,X,o>0,0===o)),t.R7$(2),t.Y8G("ngClass",t.l_i(12,X,o<n.tournament.tournamentRules.length-1,o===n.tournament.tournamentRules.length-1))}}function Dt(i,s){if(1&i){const e=t.RV6();t.j41(0,"mat-icon",29),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.deleteRuleField(n.tournament.tournamentRules.length-1))}),t.EFF(1," delete "),t.k0s()}}let Yt=(()=>{class i{constructor(e){this.tournamentService=e,this.maxCharacters=500}ngOnInit(){this.subscription=this.tournamentService.getTournament().subscribe(e=>{this.tournament=e})}addRuleField(){this.tournament.tournamentRules.push({id:0,idTournament:this.tournament.id,title:"",content:"",displayOrder:this.tournament.tournamentRules.length})}deleteRuleField(e){0!==e&&this.tournament.tournamentRules.splice(e,1)}moveRuleUp(e){if(0===e)return;const o=this.tournament.tournamentRules[e],n=this.tournament.tournamentRules[e-1];o.displayOrder=e-1,n.displayOrder=e,this.tournament.tournamentRules[e]=n,this.tournament.tournamentRules[e-1]=o}moveRuleDown(e){if(e===this.tournament.tournamentRules.length-1)return;const o=this.tournament.tournamentRules[e],n=this.tournament.tournamentRules[e+1];o.displayOrder=e+1,n.displayOrder=e,this.tournament.tournamentRules[e]=n,this.tournament.tournamentRules[e+1]=o}onResize(e){this.setButtonStyles()}setButtonStyles(){const e=window.innerWidth;this.buttonStyle=e<600?{"padding-left":"0.6rem","padding-right":"0.6rem","min-height":"1rem",width:"100%"}:e<900?{"padding-left":"1rem","padding-right":"1rem","min-height":"2rem",width:"100%"}:{"padding-left":"3rem","padding-right":"3rem","min-height":"2.5rem"}}Save(){this.tournamentService.save(this.tournament)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}static#t=this.\u0275fac=function(o){return new(o||i)(t.rXU(P))};static#e=this.\u0275cmp=t.VBU({type:i,selectors:[["app-tournaments-rules"]],hostBindings:function(o,n){1&o&&t.bIt("resize",function(r){return n.onResize(r)},!1,t.tSv)},decls:25,vars:6,consts:[[1,"form-container"],[1,"form-section"],[1,"form-section-title"],[1,"rules-description"],[1,"rules-col"],[4,"ngFor","ngForOf"],[1,"rules-add-delete"],["color","primary","matTooltip","Add Section",3,"click"],["color","warn","matTooltip","Delete Section",3,"click",4,"ngIf"],[1,"action-button-container"],["mat-mini-fab","","matTooltip","Add Templates","matTooltipClass","custom-tooltip",1,"action-button",3,"click","disabled"],["color","primary"],["mat-mini-fab","","matTooltip","Save Progress","matTooltipClass","custom-tooltip",1,"action-button",3,"click","disabled"],["mat-mini-fab","","matTooltip","Publish",1,"action-button",3,"click","disabled"],["mat-mini-fab","","matTooltip","Reset All",1,"action-button",3,"click","disabled"],[1,"rules-row"],[1,"form-col","rules-col"],["appearance","outline"],["matInput","","placeholder","Section Title","type","text",3,"ngModelChange","ngModel"],["matSuffix","","mat-icon-button","","aria-label","Section Title",3,"click",4,"ngIf"],["appearance","outline",1,"form-field",3,"ngClass"],["matInput","","placeholder","Write your section's information here.","type","text",3,"ngModelChange","ngModel"],["matSuffix","","mat-icon-button","","aria-label","Section Information",3,"click",4,"ngIf"],["align","end"],[1,"rules-arrows-container"],[1,"rules-arrows","arrow-color-inactive"],[3,"click","ngClass"],["matSuffix","","mat-icon-button","","aria-label","Section Title",3,"click"],["matSuffix","","mat-icon-button","","aria-label","Section Information",3,"click"],["color","warn","matTooltip","Delete Section",3,"click"]],template:function(o,n){1&o&&(t.j41(0,"div",0)(1,"div",1)(2,"div",2),t.EFF(3,"Rules of Engagement"),t.k0s(),t.j41(4,"div",3),t.EFF(5," We have provided you with template sections that you may want to consider including for your event. Feel free to edit or remove any of the template rules. You can add more sections using the yellow add button. You can also rearrange your section with the arrow keys. "),t.k0s(),t.j41(6,"div",4),t.DNE(7,Vt,21,15,"ng-container",5),t.j41(8,"div",6)(9,"mat-icon",7),t.bIt("click",function(){return n.addRuleField()}),t.EFF(10,"add_box"),t.k0s(),t.DNE(11,Dt,2,0,"mat-icon",8),t.k0s()(),t.j41(12,"div",9)(13,"button",10),t.bIt("click",function(){return""}),t.j41(14,"mat-icon",11),t.EFF(15,"note_add"),t.k0s()(),t.j41(16,"button",12),t.bIt("click",function(){return n.Save()}),t.j41(17,"mat-icon",11),t.EFF(18,"save"),t.k0s()(),t.j41(19,"button",13),t.bIt("click",function(){return""}),t.j41(20,"mat-icon",11),t.EFF(21,"publish"),t.k0s()(),t.j41(22,"button",14),t.bIt("click",function(){return""}),t.j41(23,"mat-icon",11),t.EFF(24,"refresh"),t.k0s()()()()()),2&o&&(t.R7$(7),t.Y8G("ngForOf",n.tournament.tournamentRules),t.R7$(4),t.Y8G("ngIf",n.tournament.tournamentRules.length>1),t.R7$(2),t.Y8G("disabled",!1),t.R7$(3),t.Y8G("disabled",!0),t.R7$(3),t.Y8G("disabled",!1),t.R7$(3),t.Y8G("disabled",!1))},dependencies:[c.YU,c.Sq,c.bT,u.me,u.BC,u.vS,_.rl,_.nJ,_.MV,_.yw,w.fg,S.An,p.iY,p.$0,G.oV],styles:['.form-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex:1;flex-wrap:wrap}.form-section[_ngcontent-%COMP%]{display:flex;flex-direction:column}.form-section-title[_ngcontent-%COMP%]{font-family:Trajan Pro;font-style:normal;font-weight:400;font-size:1rem;color:var(--yellow-brand);text-shadow:2px 2px 4px rgba(0,0,0,.25);margin-bottom:1rem;margin-top:1rem}.rules-description[_ngcontent-%COMP%]{margin-bottom:1rem}.rules-col[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex:1}.rules-row[_ngcontent-%COMP%], .rules-add-delete[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:1rem}.rules-arrows-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.rules-arrows[_ngcontent-%COMP%]{display:flex;background-color:#45454534;border-radius:5px;flex-direction:column}.rules-arrows[_ngcontent-%COMP%]:hover{scale:1.1}.arrow-color[_ngcontent-%COMP%]{color:var(--yellow-brand)}.arrow-color-inactive[_ngcontent-%COMP%]{color:#454545}.action-button-container[_ngcontent-%COMP%]{display:flex;gap:1rem;justify-content:flex-end}.action-button[_ngcontent-%COMP%]{background-color:#454545!important}.custom-tooltip[_ngcontent-%COMP%]{color:#fff;font-family:"Source Sans 3"!important;background-color:#45454550!important;font-size:.8rem!important}']})}return i})();var zt=m(6604),At=m(78),Ut=m(728),V=(m(4059),m(9604));const Lt=["picker"];function Xt(i,s){1&i&&(t.j41(0,"mat-icon",7),t.EFF(1,"done"),t.k0s())}function Ht(i,s){1&i&&(t.j41(0,"mat-error"),t.EFF(1,"You must select a date."),t.k0s())}let Wt=(()=>{class i{constructor(){this.required=!1,this.label="",this.dateValueChange=new t.bkB,this.isFocused=!1,this.disabled=!1,this.showSpinners=!0,this.showSeconds=!1,this.touchUi=!1,this.enableMeridian=!1,this.stepHour=1,this.stepMinute=1,this.stepSecond=1,this.today=new Date,this.dateFilter=e=>{if(!e)return!1;const o=new Date;return o.setHours(0,0,0,0),e>=o}}onFocus(e){e.open()}onOpen(){this.isFocused=!0}onClose(){this.isFocused=!1}onDateChange(e){this.dateValue=e?new Date(e):void 0,this.dateValueChange.emit(this.dateValue)}static#t=this.\u0275fac=function(o){return new(o||i)};static#e=this.\u0275cmp=t.VBU({type:i,selectors:[["app-date-time-picker"]],viewQuery:function(o,n){if(1&o&&t.GBs(Lt,5),2&o){let a;t.mGM(a=t.lsd())&&(n.picker=a.first)}},inputs:{required:"required",label:"label",dateValue:"dateValue"},outputs:{dateValueChange:"dateValueChange"},decls:10,vars:11,consts:[["picker",""],["appearance","outline","subscriptSizing","dynamic"],["matInput","","autocomplete","off",3,"ngModelChange","keydown","focus","required","matDatetimepicker","ngModel","disabled","matDatepickerFilter"],["matSuffix","",3,"for"],["matSuffix","","style","color: var(--yellow-brand)",4,"ngIf"],["color","primary","type","datetime",3,"opened","closed"],[4,"ngIf"],["matSuffix","",2,"color","var(--yellow-brand)"]],template:function(o,n){if(1&o){const a=t.RV6();t.j41(0,"mat-form-field",1)(1,"mat-label"),t.EFF(2),t.k0s(),t.j41(3,"input",2),t.mxI("ngModelChange",function(l){return t.eBV(a),t.DH7(n.dateValue,l)||(n.dateValue=l),t.Njj(l)}),t.bIt("ngModelChange",function(l){return t.eBV(a),t.Njj(n.onDateChange(l))})("keydown",function(){return t.eBV(a),t.Njj(!1)})("focus",function(){t.eBV(a);const l=t.sdS(7);return t.Njj(n.onFocus(l))}),t.k0s(),t.nrm(4,"mat-datetimepicker-toggle",3),t.DNE(5,Xt,2,0,"mat-icon",4),t.j41(6,"mat-datetimepicker",5,0),t.bIt("opened",function(){return t.eBV(a),t.Njj(n.onOpen())})("closed",function(){return t.eBV(a),t.Njj(n.onClose())}),t.k0s(),t.DNE(8,Ht,2,0,"mat-error",6),t.nrm(9,"mat-hint"),t.k0s()}if(2&o){const a=t.sdS(7);t.R7$(2),t.JRh(n.label),t.R7$(),t.Y8G("required",n.required)("matDatetimepicker",a),t.R50("ngModel",n.dateValue),t.Y8G("disabled",n.disabled)("matDatepickerFilter",n.dateFilter),t.R7$(),t.HbH(n.isFocused?"yellow-brand":""),t.Y8G("for",a),t.R7$(),t.Y8G("ngIf",n.dateValue),t.R7$(3),t.Y8G("ngIf",n.required&&!n.dateValue)}},dependencies:[c.bT,_.rl,_.nJ,_.MV,_.TL,_.yw,w.fg,S.An,V.NM,V.NI,V.Xm,u.me,u.BC,u.YS,u.vS],styles:[".yellow-brand[_ngcontent-%COMP%]{color:var(--yellow-brand)}"]})}return i})();var Kt=m(2798);const Jt=i=>({"margin-top":i});function Qt(i,s){if(1&i){const e=t.RV6();t.j41(0,"button",40),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.tournament.hostName="")})("mousedown",function(n){t.eBV(e);const a=t.XpG();return t.Njj(a.preventBlur(n))}),t.j41(1,"mat-icon",41),t.EFF(2,"delete_outline"),t.k0s()()}}function qt(i,s){1&i&&(t.j41(0,"mat-icon",42),t.EFF(1," done "),t.k0s())}function Zt(i,s){if(1&i&&(t.qex(0),t.EFF(1),t.bVm()),2&i){const e=t.XpG();t.R7$(),t.Lme(" ",e.tournament.hostName.length,"/",50," characters ")}}function te(i,s){}function ee(i,s){if(1&i){const e=t.RV6();t.j41(0,"button",40),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.tournament.name="")})("mousedown",function(n){t.eBV(e);const a=t.XpG();return t.Njj(a.preventBlur(n))}),t.j41(1,"mat-icon",41),t.EFF(2,"delete_outline"),t.k0s()()}}function ne(i,s){1&i&&(t.j41(0,"mat-icon",42),t.EFF(1,"done"),t.k0s())}function oe(i,s){if(1&i&&(t.qex(0),t.EFF(1),t.bVm()),2&i){const e=t.XpG();t.R7$(),t.Lme(" ",e.tournament.name.length,"/",80," characters ")}}function ie(i,s){}function ae(i,s){1&i&&(t.j41(0,"mat-error"),t.EFF(1,"Tournament name is required."),t.k0s())}function re(i,s){if(1&i){const e=t.RV6();t.j41(0,"button",40),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.tournament.description="")})("mousedown",function(n){t.eBV(e);const a=t.XpG();return t.Njj(a.preventBlur(n))}),t.j41(1,"mat-icon",41),t.EFF(2,"delete_outline"),t.k0s()()}}function se(i,s){1&i&&(t.j41(0,"mat-icon",42),t.EFF(1,"done"),t.k0s())}function le(i,s){if(1&i&&(t.qex(0),t.EFF(1),t.bVm()),2&i){const e=t.XpG();t.R7$(),t.Lme(" ",e.tournament.description.length,"/ ",500," characters ")}}function me(i,s){}function ce(i,s){1&i&&(t.j41(0,"mat-error"),t.EFF(1,"Tournament description is required."),t.k0s())}function ue(i,s){if(1&i&&(t.qex(0),t.j41(1,"mat-option",43),t.EFF(2),t.k0s(),t.bVm()),2&i){const e=s.$implicit;t.R7$(),t.Y8G("value",e.value),t.R7$(),t.SpI(" ",e.name," ")}}function de(i,s){1&i&&(t.j41(0,"mat-icon",42),t.EFF(1,"done"),t.k0s())}function pe(i,s){if(1&i&&(t.qex(0),t.j41(1,"mat-option",43),t.EFF(2),t.k0s(),t.bVm()),2&i){const e=s.$implicit;t.R7$(),t.Y8G("value",e.value),t.R7$(),t.SpI(" ",e.name," ")}}function ge(i,s){1&i&&(t.j41(0,"mat-icon",42),t.EFF(1,"done"),t.k0s())}function _e(i,s){if(1&i&&(t.qex(0),t.j41(1,"mat-option",43),t.EFF(2),t.k0s(),t.bVm()),2&i){const e=s.$implicit;t.R7$(),t.Y8G("value",e.value),t.R7$(),t.SpI(" ",e.name," ")}}function he(i,s){1&i&&(t.j41(0,"mat-icon",42),t.EFF(1,"done"),t.k0s())}function fe(i,s){if(1&i&&(t.qex(0),t.j41(1,"mat-option",43),t.EFF(2),t.k0s(),t.bVm()),2&i){const e=s.$implicit;t.R7$(),t.Y8G("value",e.name),t.R7$(),t.SpI(" ",e.name," ")}}function be(i,s){1&i&&(t.j41(0,"mat-icon",42),t.EFF(1,"done"),t.k0s())}function Ce(i,s){if(1&i){const e=t.RV6();t.j41(0,"button",40),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.tournament.signupCost=0)})("mousedown",function(n){t.eBV(e);const a=t.XpG();return t.Njj(a.preventBlur(n))}),t.j41(1,"mat-icon",41),t.EFF(2,"delete_outline"),t.k0s()()}}function ve(i,s){1&i&&(t.j41(0,"mat-icon",42),t.EFF(1,"done"),t.k0s())}function ye(i,s){if(1&i&&(t.qex(0),t.EFF(1),t.bVm()),2&i){const e=t.XpG();t.R7$(),t.Lme(" ",e.tournament.signupCost.toString.length,"/ ",8," digits ")}}function xe(i,s){}function Te(i,s){if(1&i){const e=t.RV6();t.j41(0,"img",44),t.bIt("error",function(n){t.eBV(e);const a=t.XpG();return t.Njj(a.handleCountryError(n))}),t.k0s()}if(2&i){const e=t.XpG();t.FS9("alt",e.selectedCountry.name),t.Y8G("src",e.selectedCountry.flag,t.B4B)}}function ke(i,s){if(1&i){const e=t.RV6();t.j41(0,"button",45),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.clearCountry())}),t.j41(1,"mat-icon",41),t.EFF(2,"delete_outline"),t.k0s()()}}function Me(i,s){if(1&i){const e=t.RV6();t.j41(0,"mat-option",46,5)(2,"img",47),t.bIt("error",function(n){t.eBV(e);const a=t.XpG();return t.Njj(a.handleCountryError(n))}),t.k0s(),t.j41(3,"span",48),t.EFF(4),t.k0s()()}if(2&i){const e=s.$implicit;t.Y8G("value",e),t.R7$(2),t.FS9("alt",e.name),t.Y8G("src",e.flag,t.B4B),t.R7$(2),t.JRh(e.name)}}function Pe(i,s){if(1&i){const e=t.RV6();t.j41(0,"mat-icon",56),t.bIt("click",function(){t.eBV(e);const n=t.XpG(4);return t.Njj(n.deleteInputField(n.tournament.tournamentPrize.length-1))}),t.EFF(1,"delete"),t.k0s()}}function Se(i,s){if(1&i){const e=t.RV6();t.j41(0,"div",53)(1,"mat-icon",54),t.bIt("click",function(){t.eBV(e);const n=t.XpG().index,a=t.XpG(2);return t.Njj(a.addInputField(n))}),t.EFF(2,"add_box"),t.k0s(),t.DNE(3,Pe,2,0,"mat-icon",55),t.k0s()}if(2&i){const e=t.XpG(3);t.R7$(3),t.Y8G("ngIf",e.tournament.tournamentPrize.length>1)}}function Fe(i,s){if(1&i){const e=t.RV6();t.qex(0),t.j41(1,"div",8)(2,"mat-form-field",13)(3,"mat-label"),t.EFF(4),t.k0s(),t.j41(5,"input",50),t.mxI("ngModelChange",function(n){const a=t.eBV(e).$implicit;return t.DH7(a.prizePercent,n)||(a.prizePercent=n),t.Njj(n)}),t.k0s(),t.j41(6,"span",28),t.EFF(7,"%\xa0"),t.k0s(),t.j41(8,"span",51),t.EFF(9),t.k0s()(),t.DNE(10,Se,4,1,"div",52),t.k0s(),t.bVm()}if(2&i){const e=s.$implicit,o=s.index,n=t.XpG(2);t.R7$(4),t.SpI("",n.ordinalSuffixOf(o+1)," place"),t.R7$(),t.Mz_("name","tournamentPrize ",o,""),t.R50("ngModel",e.prizePercent),t.R7$(4),t.SpI("\xa0$",n.calculatePrizeValue(o),""),t.R7$(),t.Y8G("ngIf",o===n.tournament.tournamentPrize.length-1)}}function je(i,s){if(1&i&&(t.j41(0,"div",49),t.DNE(1,Fe,11,6,"ng-container",23),t.k0s()),2&i){const e=t.XpG();t.R7$(),t.Y8G("ngForOf",e.tournament.tournamentPrize)}}function Oe(i,s){if(1&i&&(t.j41(0,"mat-error")(1,"span"),t.EFF(2," Total percentage must equal 100%. Current total: "),t.k0s(),t.EFF(3),t.j41(4,"span"),t.EFF(5,"%."),t.k0s()()),2&i){t.XpG();const e=t.sdS(1);t.R7$(3),t.SpI(" ",null==e.controls.tournamentPrize.errors?null:e.controls.tournamentPrize.errors.totalPercentageInvalid," ")}}function Ie(i,s){if(1&i&&(t.qex(0),t.j41(1,"mat-option",43),t.EFF(2),t.k0s(),t.bVm()),2&i){const e=s.$implicit;t.R7$(),t.Y8G("value",e.value),t.R7$(),t.SpI(" ",e.name," ")}}function Re(i,s){1&i&&(t.j41(0,"mat-icon",42),t.EFF(1,"done"),t.k0s())}function Ee(i,s){1&i&&(t.j41(0,"mat-icon",42),t.EFF(1,"done"),t.k0s())}function we(i,s){if(1&i&&(t.j41(0,"mat-option",43),t.nrm(1,"img",66),t.EFF(2),t.k0s()),2&i){const e=s.$implicit,o=t.XpG(4);t.Y8G("value",e.info.id),t.R7$(),t.Y8G("src",o.getMapPath(e.info),t.B4B),t.R7$(),t.SpI(" ",e.name," ")}}function Be(i,s){if(1&i){const e=t.RV6();t.qex(0),t.j41(1,"mat-form-field",13)(2,"mat-label"),t.EFF(3),t.k0s(),t.j41(4,"input",62),t.mxI("ngModelChange",function(n){const a=t.eBV(e).$implicit;return t.DH7(a.idMap,n)||(a.idMap=n),t.Njj(n)}),t.k0s(),t.j41(5,"mat-icon",63),t.bIt("click",function(n){const a=t.eBV(e).$implicit,r=t.XpG(3);return t.Njj(r.toggleBlindPick(n,a))}),t.EFF(6," blind "),t.k0s(),t.DNE(7,Ee,2,0,"mat-icon",16),t.j41(8,"mat-autocomplete",64,4),t.DNE(10,we,3,3,"mat-option",65),t.k0s(),t.nrm(11,"mat-error")(12,"mat-hint"),t.k0s(),t.bVm()}if(2&i){const e=s.$implicit,o=s.index,n=t.sdS(9),a=t.XpG(2).index,r=t.XpG();t.R7$(3),t.SpI("Map ",o+1,""),t.R7$(),t.FCK("name","maps ",a,":",o,""),t.Y8G("matAutocomplete",n),t.R50("ngModel",e.idMap),t.R7$(),t.xc7("color",e.blindPick?"var(--yellow-brand)":""),t.R7$(2),t.Y8G("ngIf",e.idMap>0),t.R7$(),t.Y8G("displayWith",r.displayFn),t.R7$(2),t.Y8G("ngForOf",r.mapArray)}}function Ne(i,s){if(1&i&&(t.j41(0,"div",61),t.DNE(1,Be,13,11,"ng-container",23),t.k0s()),2&i){const e=t.XpG().$implicit;t.R7$(),t.Y8G("ngForOf",e.tournamentRoundsMaps)}}function Ge(i,s){if(1&i){const e=t.RV6();t.qex(0),t.j41(1,"div",57)(2,"div",8)(3,"mat-form-field",13)(4,"mat-label"),t.EFF(5),t.k0s(),t.j41(6,"mat-select",58),t.mxI("ngModelChange",function(n){const a=t.eBV(e).$implicit;return t.DH7(a.gameCount,n)||(a.gameCount=n),t.Njj(n)}),t.bIt("ngModelChange",function(n){const a=t.eBV(e).$implicit,r=t.XpG();return t.Njj(r.updateNumberOfMaps(a,n))}),t.DNE(7,Ie,3,2,"ng-container",23),t.k0s(),t.DNE(8,Re,2,0,"mat-icon",16),t.nrm(9,"mat-error")(10,"mat-hint"),t.k0s(),t.j41(11,"app-date-time-picker",59),t.bIt("dateValueChange",function(n){const a=t.eBV(e).$implicit,r=t.XpG();return t.Njj(r.to_timestamp(n,"start",a))}),t.k0s(),t.j41(12,"app-date-time-picker",59),t.bIt("dateValueChange",function(n){const a=t.eBV(e).$implicit,r=t.XpG();return t.Njj(r.to_timestamp(n,"end",a))}),t.k0s()(),t.DNE(13,Ne,2,1,"div",60),t.k0s(),t.bVm()}if(2&i){const e=s.$implicit,o=s.index,n=t.XpG();t.R7$(),t.Y8G("ngStyle",t.eq3(12,Jt,o>0?"1rem":"0")),t.R7$(4),t.JRh(n.GetRoundName(e.roundLevel)),t.R7$(),t.Mz_("name","rounds ",o,""),t.R50("ngModel",e.gameCount),t.R7$(),t.Y8G("ngForOf",n.roundOptions),t.R7$(),t.Y8G("ngIf",e.gameCount>0),t.R7$(3),t.Y8G("label","Start date")("dateValue",e.dateStartDate),t.R7$(),t.Y8G("label","End date")("dateValue",e.dateEndDate),t.R7$(),t.Y8G("ngIf",n.dataLoaded)}}let $e=(()=>{class i{constructor(e,o,n,a){this.countryService=e,this.tournamentService=o,this.jsonService=n,this.stringTableService=a,this.subscriptions=[],this.nbRound=0,this.today=new Date,this.dataLoaded=!1,this.languageDisplayNames=["","","","","","","","","","","","","","",""],this.gameList=[{name:"Age of Empires III: Definitive Edition",value:1}],this.modeList=[{name:"1v1",value:1},{name:"2v2",value:8},{name:"3v3",value:9},{name:"4v4",value:10}],this.formatList=[{name:"Single Elimination",value:0}],this.roundOptions=[{name:"Best of 1",value:1},{name:"Best of 3",value:3},{name:"Best of 5",value:5},{name:"Best of 7",value:7},{name:"Best of 9",value:9}],this.participantsList=[{name:2,value:1},{name:4,value:2},{name:8,value:3},{name:16,value:4},{name:32,value:5},{name:64,value:6},{name:128,value:7},{name:256,value:8}],this.numberOfMaps=[[0,1,2]],this.countries=[],this.filteredCountries=[],this.countryInput="",this.selectedCountry=null,this.displayFn=r=>this.getMapNameById(r),this.subscriptions.push(this.tournamentService.getTournament().subscribe(r=>{this.tournament=r,this.registrationStartDate=(0,g.K5)(this.tournament.dateSignupStart),this.registrationEndDate=(0,g.K5)(this.tournament.dateSignupClose),this.sortRounds(),this.tournament.tournamentRoundsDef?.forEach(l=>{l.dateStartDate=(0,g.K5)(l.dateStart),l.dateEndDate=(0,g.K5)(l.dateEnd),l.tournamentRoundsMaps?.sort((x,D)=>x.displayOrder-D.displayOrder)}),this.checkSavedCountry()}))}ngOnInit(){var e=this;return(0,b.A)(function*(){e.subscriptions.push(e.countryService.getCountries().subscribe(o=>{e.countries=o,e.filteredCountries=o,e.checkSavedCountry()})),e.setButtonStyles(),yield e.populateFields(),e.dataLoaded=!0})()}checkSavedCountry(){if(!this.countries||!this.tournament)return;var e=this.tournament.country?.toUpperCase();const o=this.countries.find(n=>n.alpha2Code?.toUpperCase()===e);o&&(this.selectedCountry=o,this.countryInput=o.name)}clearCountry(){this.selectedCountry=null,this.countryInput="",this.tournament.country=""}onCountryInputChange(){this.selectedCountry=null;const e=this.countryInput.toLowerCase();this.filteredCountries=this.countries.filter(o=>o.name.toLowerCase().includes(e))}onCountrySelected(e){this.selectedCountry=e.option.value,this.selectedCountry&&(this.countryInput=this.selectedCountry.name,this.tournament.country=this.selectedCountry.alpha2Code?.toUpperCase())}handleCountryError(e){e.target.src="assets/icons/no_avatar.jpg"}toggleBlindPick(e,o){e.stopPropagation(),o.blindPick=!o.blindPick}mapValues(){return this.maps?Object.values(this.maps):[]}getMapPath(e){return`${zt.eD}${e.imagepath}.png`}populateFields(){var e=this;return(0,b.A)(function*(){e.maps=yield(0,g.re)(e.jsonService),yield e.updateLanguage()})()}getSteamAvatar(e){return e||"assets/icons/no_avatar.jpg"}initializeMap(e=0){return{id:null,idTournamentRoundsDef:null,idMap:0,displayOrder:e,blindPick:!1}}sortRounds(){this.tournament.tournamentRoundsDef?.sort((e,o)=>e.roundLevel-o.roundLevel)}initializeMaps(){let e=[];return e.push(this.initializeMap(0)),e.push(this.initializeMap(1)),e.push(this.initializeMap(2)),e}getMapNameById(e){if(!this.mapArray||e<=0)return"";const o=this.mapArray.find(n=>n.info.id===e);return o?o.name:""}updateMapId(e,o){const n=e.target.value,a=this.mapArray.find(r=>r.name.toLowerCase()===n.toLowerCase());o.idMap=a?a.info.id:0}onMapSelected(e,o){o.idMap=e.option.value}calculateNumberOfRounds(e){return Math.log2(e)}updateRounds(e){const o=this.calculateNumberOfRounds(e),n=this.tournament.tournamentRoundsDef.length;setTimeout(()=>{if(n<o)for(let r=n;r<o;r++)this.tournament.tournamentRoundsDef.push({id:null,idTournament:this.tournament.id,roundLevel:r+1,gameCount:3,dateStart:void 0,dateEnd:void 0,dateStartDate:void 0,dateEndDate:void 0,groupCount:1,tournamentRoundsMaps:this.initializeMaps()});else n>o&&this.tournament.tournamentRoundsDef.splice(o,n-o);this.sortRounds(),this.nbRound=o},0)}onMaxPlayersChange(e){this.updateRounds(e)}GetRoundName(e){switch(e){case 1:return"Finals";case 2:return"Semi-Finals";case 3:return"Quarter-Finals";case 4:return"Round of 16";case 5:return"Round of 32";case 6:return"Round of 64";case 7:return"Round of 128";case 8:return"Round of 256";default:return""}}updateNumberOfMaps(e,o){const n=e.tournamentRoundsMaps.length;if(n<o)for(let a=n;a<o;a++)e.tournamentRoundsMaps.push(this.initializeMap(a));else n>o&&e.tournamentRoundsMaps.splice(o,n-o)}updateLanguage(){var e=this;return(0,b.A)(function*(){e.selectedLanguage=g.TM.English,e.stringTableService.setLanguage(e.selectedLanguage),yield e.stringTableService.loadStringTable(),yield e.stringTableService.getLocalizedStrings([30078,19815,70880]),yield e.updateMapGrid()})()}updateMapGrid(){var e=this;return(0,b.A)(function*(){e.mapArray=[];let o=Object.values(e.maps),n=[];for(let a=0;a<o.length;a++){let r=e.getMapName(o[a]).then(l=>{e.mapArray.push({info:o[a],name:l})}).catch(l=>{console.error("Error fetching map name:",l)});n.push(r)}yield Promise.all(n)})()}getMapName(e){var o=this;return(0,b.A)(function*(){return o.stringTableService.getLocalizedString(e.displayNameID)})()}preventBlur(e){e.preventDefault()}onBlur(e){setTimeout(()=>{this.focusedIndex===e&&(this.focusedIndex=0)},100)}onMaxChars(e){const o=e.target.maxLength,n=e.target.value;n.length>o&&(e.target.value=n.slice(0,o))}setButtonStyles(){const e=window.innerWidth;this.buttonStyle=e<600?{"padding-left":"0.6rem","padding-right":"0.6rem","min-height":"1rem",width:"100%"}:e<900?{"padding-left":"1rem","padding-right":"1rem","min-height":"2rem",width:"100%"}:{"padding-left":"3rem","padding-right":"3rem","min-height":"2.5rem"}}onResize(e){this.setButtonStyles()}calculatePrizeValue(e){if(e>=this.tournament.tournamentPrize.length)return;let n=0;return this.tournament.prizeTotal&&(n=this.tournament.tournamentPrize[e].prizePercent/100*this.tournament.prizeTotal),Number(n.toFixed(1)).toString()}onStartDateSelected(e){}addInputField(e){this.tournament.tournamentPrize.push({id:null,idTournament:this.tournament.id,place:e,prizePercent:0})}deleteInputField(e){0!==e&&this.tournament.tournamentPrize.splice(e,1)}ordinalSuffixOf(e){const o=e%10,n=e%100;return 1==o&&11!=n?e+"st":2==o&&12!=n?e+"nd":3==o&&13!=n?e+"rd":e+"th"}scrollToFirstError(e){for(const o in e.controls)if(e.controls[o].errors){const a=document.querySelector(`[name='${o}']`);if(a){a.scrollIntoView({behavior:"smooth",block:"center"});break}}}markFormGroupTouched(e){Object.keys(e.controls).forEach(o=>{e.controls[o].markAsTouched()})}Publish(e){this.tournament.published=!0,this.Save(e),location.reload()}updateTournament(){this.tournamentService.updateTournament(this.tournament)}to_timestamp(e,o,n){void 0!==e&&(n?"start"===o?(n.dateStart=(0,g.W4)(e),n.dateStartDate=e):(n.dateEnd=(0,g.W4)(e),n.dateEndDate=e):"start"===o?(this.tournament.dateSignupStart=(0,g.W4)(e),this.registrationStartDate=e):(this.tournament.dateSignupClose=(0,g.W4)(e),this.registrationEndDate=e))}ngOnDestroy(){this.subscriptions.forEach(e=>{e.unsubscribe()})}Save(e){if(console.log("save"),this.markFormGroupTouched(e),this.tournament.prizeTotal>0){const o=this.tournament.tournamentPrize.reduce((n,a)=>n+a.prizePercent,0);e.controls.tournamentPrize.setErrors(100!==o?{totalPercentageInvalid:o}:null)}e.invalid?this.scrollToFirstError(e):this.tournamentService.save(this.tournament)}static#t=this.\u0275fac=function(o){return new(o||i)(t.rXU(z.o),t.rXU(P),t.rXU(At.W),t.rXU(Ut.N))};static#e=this.\u0275cmp=t.VBU({type:i,selectors:[["app-tournaments-settings"]],hostBindings:function(o,n){1&o&&t.bIt("resize",function(r){return n.onResize(r)},!1,t.tSv)},decls:125,vars:61,consts:[["tournamentForm","ngForm"],["elseBlock",""],["nameCtrl","ngModel"],["descriptionCtrl","ngModel"],["auto","matAutocomplete"],["autoOption",""],[1,"form-container"],[1,"form-section-title"],[1,"form-row"],[1,"steam-avatar",3,"src"],["appearance","outline","subscriptSizing","dynamic",1,"form-field-fullwidth"],["matInput","","name","adminName","disabled","",3,"value"],["align","end"],["appearance","outline","subscriptSizing","dynamic"],["matInput","","name","hostName","placeholder","Used for display purposes instead of Admin name. ex: FreeFoodParty","maxlength","50",3,"ngModelChange","input","focus","blur","ngModel"],["matSuffix","","mat-icon-button","",3,"click","mousedown",4,"ngIf"],["matSuffix","","style","color: var(--yellow-brand)",4,"ngIf"],[4,"ngIf","ngIfElse"],["matInput","","name","tournamentName","required","","maxlength","80",3,"ngModelChange","input","focus","blur","ngModel"],[4,"ngIf"],["matInput","","name","tournamentDescription","required","","placeholder","You can provide a brief description of what this tournament is all about!","maxlength","500",3,"ngModelChange","input","focus","blur","ngModel"],[1,"admin-container"],["name","tournamentGame",3,"ngModelChange","ngModel"],[4,"ngFor","ngForOf"],["name","tournamentGameMode",3,"ngModelChange","ngModel"],["name","tournamentFormat",3,"ngModelChange","ngModel"],["name","tournamentParticipants",3,"ngModelChange","ngModel"],["matInput","","name","tournamentEntryFee","type","number","oninput","this.value = this.valueAsNumber","min","0","maxlength","8",3,"ngModelChange","input","focus","blur","ngModel"],["matTextPrefix",""],["matPrefix","","class","flag-icon",3,"src","alt","error",4,"ngIf"],["matInput","","name","country_selection","type","text","aria-label","Country",3,"ngModelChange","input","ngModel","matAutocomplete"],["matSuffix","","mat-icon-button","",3,"click",4,"ngIf"],[3,"optionSelected"],["class","country-option",3,"value",4,"ngFor","ngForOf"],[3,"dateValueChange","label","required","dateValue"],[1,"form-section"],["matInput","","name","tournamentPrize","type","number","oninput","this.value = this.valueAsNumber","min","0",3,"ngModelChange","ngModel"],["class","prize-container",4,"ngIf"],[1,"mt-20"],[1,"button",3,"OnButtonClicked","Name","InputIndex","buttonStyle","ActiveEnabled"],["matSuffix","","mat-icon-button","",3,"click","mousedown"],["color","warn"],["matSuffix","",2,"color","var(--yellow-brand)"],[3,"value"],["matPrefix","",1,"flag-icon",3,"error","src","alt"],["matSuffix","","mat-icon-button","",3,"click"],[1,"country-option",3,"value"],[1,"flag-icon",3,"error","src","alt"],[1,"mat-option-text"],[1,"prize-container"],["matInput","","required","","type","number","oninput","this.value = this.valueAsNumber","max","100",3,"ngModelChange","name","ngModel"],["matTextSuffix","",1,"prize-suffix"],["class","add-delete",4,"ngIf"],[1,"add-delete"],["color","primary",3,"click"],["color","warn",3,"click",4,"ngIf"],["color","warn",3,"click"],[3,"ngStyle"],["required","",3,"ngModelChange","name","ngModel"],[3,"dateValueChange","label","dateValue"],["class","form-row","style","margin-left: 2rem",4,"ngIf"],[1,"form-row",2,"margin-left","2rem"],["matInput","","type","text","aria-label","Map",3,"ngModelChange","name","matAutocomplete","ngModel"],["matSuffix","",3,"click"],[3,"displayWith"],[3,"value",4,"ngFor","ngForOf"],[1,"map-image",3,"src"]],template:function(o,n){if(1&o){const a=t.RV6();t.j41(0,"form",null,0)(2,"div",6)(3,"div",7),t.EFF(4,"Basic Information"),t.k0s(),t.j41(5,"div",8),t.nrm(6,"img",9),t.j41(7,"mat-form-field",10)(8,"mat-label"),t.EFF(9,"Admin Name"),t.k0s(),t.nrm(10,"input",11)(11,"mat-hint",12),t.k0s()(),t.j41(12,"mat-form-field",13)(13,"mat-label"),t.EFF(14,"Host Name"),t.k0s(),t.j41(15,"input",14),t.mxI("ngModelChange",function(l){return t.eBV(a),t.DH7(n.tournament.hostName,l)||(n.tournament.hostName=l),t.Njj(l)}),t.bIt("input",function(l){return t.eBV(a),t.Njj(n.onMaxChars(l))})("focus",function(){return t.eBV(a),t.Njj(n.focusedIndex=1)})("blur",function(){return t.eBV(a),t.Njj(n.onBlur(1))}),t.k0s(),t.DNE(16,Qt,3,0,"button",15)(17,qt,2,0,"mat-icon",16),t.j41(18,"mat-hint",12),t.DNE(19,Zt,2,2,"ng-container",17)(20,te,0,0,"ng-template",null,1,t.C5r),t.k0s()(),t.j41(22,"mat-form-field",13)(23,"mat-label"),t.EFF(24,"Tournament Name"),t.k0s(),t.j41(25,"input",18,2),t.mxI("ngModelChange",function(l){return t.eBV(a),t.DH7(n.tournament.name,l)||(n.tournament.name=l),t.Njj(l)}),t.bIt("input",function(l){return t.eBV(a),t.Njj(n.onMaxChars(l))})("input",function(){return t.eBV(a),t.Njj(n.focusedIndex=2)})("focus",function(){return t.eBV(a),t.Njj(n.focusedIndex=2)})("blur",function(){return t.eBV(a),t.Njj(n.onBlur(2))}),t.k0s(),t.DNE(27,ee,3,0,"button",15)(28,ne,2,0,"mat-icon",16),t.j41(29,"mat-hint",12),t.DNE(30,oe,2,2,"ng-container",17)(31,ie,0,0,"ng-template",null,1,t.C5r),t.k0s(),t.DNE(33,ae,2,0,"mat-error",19),t.k0s(),t.j41(34,"mat-form-field",13)(35,"mat-label"),t.EFF(36,"Tournament Description"),t.k0s(),t.j41(37,"textarea",20,3),t.mxI("ngModelChange",function(l){return t.eBV(a),t.DH7(n.tournament.description,l)||(n.tournament.description=l),t.Njj(l)}),t.bIt("input",function(l){return t.eBV(a),t.Njj(n.onMaxChars(l))})("input",function(){return t.eBV(a),t.Njj(n.focusedIndex=3)})("focus",function(){return t.eBV(a),t.Njj(n.focusedIndex=3)})("blur",function(){return t.eBV(a),t.Njj(n.onBlur(3))}),t.k0s(),t.DNE(39,re,3,0,"button",15)(40,se,2,0,"mat-icon",16),t.j41(41,"mat-hint",12),t.DNE(42,le,2,2,"ng-container",17)(43,me,0,0,"ng-template",null,1,t.C5r),t.k0s(),t.DNE(45,ce,2,0,"mat-error",19),t.k0s(),t.j41(46,"div",7),t.EFF(47,"Game Information"),t.k0s(),t.j41(48,"div",21)(49,"mat-form-field",10)(50,"mat-label"),t.EFF(51,"Game"),t.k0s(),t.j41(52,"mat-select",22),t.mxI("ngModelChange",function(l){return t.eBV(a),t.DH7(n.tournament.game,l)||(n.tournament.game=l),t.Njj(l)}),t.DNE(53,ue,3,2,"ng-container",23),t.k0s(),t.DNE(54,de,2,0,"mat-icon",16),t.nrm(55,"mat-hint"),t.k0s(),t.j41(56,"mat-form-field",10)(57,"mat-label"),t.EFF(58,"Mode"),t.k0s(),t.j41(59,"mat-select",24),t.mxI("ngModelChange",function(l){return t.eBV(a),t.DH7(n.tournament.gameMode,l)||(n.tournament.gameMode=l),t.Njj(l)}),t.DNE(60,pe,3,2,"ng-container",23),t.k0s(),t.DNE(61,ge,2,0,"mat-icon",16),t.nrm(62,"mat-hint"),t.k0s(),t.j41(63,"mat-form-field",10)(64,"mat-label"),t.EFF(65,"Format"),t.k0s(),t.j41(66,"mat-select",25),t.mxI("ngModelChange",function(l){return t.eBV(a),t.DH7(n.tournament.format,l)||(n.tournament.format=l),t.Njj(l)}),t.DNE(67,_e,3,2,"ng-container",23),t.k0s(),t.DNE(68,he,2,0,"mat-icon",16),t.nrm(69,"mat-hint"),t.k0s()(),t.j41(70,"div",7),t.EFF(71,"Registration"),t.k0s(),t.j41(72,"div",8)(73,"mat-form-field",13)(74,"mat-label"),t.EFF(75,"Participants"),t.k0s(),t.j41(76,"mat-select",26),t.mxI("ngModelChange",function(l){return t.eBV(a),t.DH7(n.tournament.maxPlayers,l)||(n.tournament.maxPlayers=l),t.Njj(l)}),t.bIt("ngModelChange",function(l){return t.eBV(a),t.Njj(n.onMaxPlayersChange(l))}),t.DNE(77,fe,3,2,"ng-container",23),t.k0s(),t.DNE(78,be,2,0,"mat-icon",16),t.nrm(79,"mat-hint"),t.k0s(),t.j41(80,"mat-form-field",13)(81,"mat-label"),t.EFF(82,"Entry Fee"),t.k0s(),t.j41(83,"input",27),t.mxI("ngModelChange",function(l){return t.eBV(a),t.DH7(n.tournament.signupCost,l)||(n.tournament.signupCost=l),t.Njj(l)}),t.bIt("input",function(l){return t.eBV(a),t.Njj(n.onMaxChars(l))})("input",function(){return t.eBV(a),t.Njj(n.focusedIndex=4)})("focus",function(){return t.eBV(a),t.Njj(n.focusedIndex=4)})("blur",function(){return t.eBV(a),t.Njj(n.onBlur(4))}),t.k0s(),t.j41(84,"span",28),t.EFF(85,"$\xa0"),t.k0s(),t.DNE(86,Ce,3,0,"button",15)(87,ve,2,0,"mat-icon",16),t.j41(88,"mat-hint",12),t.DNE(89,ye,2,2,"ng-container",17)(90,xe,0,0,"ng-template",null,1,t.C5r),t.k0s()(),t.j41(92,"mat-form-field",13)(93,"mat-label"),t.EFF(94,"Country Restriction"),t.k0s(),t.DNE(95,Te,1,2,"img",29),t.j41(96,"input",30),t.mxI("ngModelChange",function(l){return t.eBV(a),t.DH7(n.countryInput,l)||(n.countryInput=l),t.Njj(l)}),t.bIt("input",function(){return t.eBV(a),t.Njj(n.onCountryInputChange())}),t.k0s(),t.DNE(97,ke,3,0,"button",31),t.j41(98,"mat-autocomplete",32,4),t.bIt("optionSelected",function(l){return t.eBV(a),t.Njj(n.onCountrySelected(l))}),t.DNE(100,Me,5,4,"mat-option",33),t.k0s(),t.nrm(101,"mat-hint"),t.k0s()(),t.j41(102,"div",8)(103,"app-date-time-picker",34),t.bIt("dateValueChange",function(l){return t.eBV(a),t.Njj(n.to_timestamp(l,"start"))}),t.k0s(),t.j41(104,"app-date-time-picker",34),t.bIt("dateValueChange",function(l){return t.eBV(a),t.Njj(n.to_timestamp(l,"end"))}),t.k0s()(),t.j41(105,"div",35)(106,"div",7),t.EFF(107,"Prizepool"),t.k0s(),t.j41(108,"div",8)(109,"mat-form-field",13)(110,"mat-label"),t.EFF(111,"Total Prize"),t.k0s(),t.j41(112,"input",36),t.mxI("ngModelChange",function(l){return t.eBV(a),t.DH7(n.tournament.prizeTotal,l)||(n.tournament.prizeTotal=l),t.Njj(l)}),t.k0s(),t.j41(113,"span",28),t.EFF(114,"$\xa0"),t.k0s()(),t.DNE(115,je,2,1,"div",37),t.k0s(),t.DNE(116,Oe,6,1,"mat-error",19),t.k0s(),t.j41(117,"div",35)(118,"div",7),t.EFF(119," Rounds Format, Timeframe, and Map Pools "),t.k0s(),t.DNE(120,Ge,14,14,"ng-container",23),t.j41(121,"div",38)(122,"app-custom-button",39),t.bIt("OnButtonClicked",function(){t.eBV(a);const l=t.sdS(1);return t.Njj(n.Save(l))}),t.k0s()(),t.j41(123,"div",38)(124,"app-custom-button",39),t.bIt("OnButtonClicked",function(){t.eBV(a);const l=t.sdS(1);return t.Njj(n.Publish(l))}),t.k0s()()()()()}if(2&o){const a=t.sdS(1),r=t.sdS(21),l=t.sdS(26),x=t.sdS(38),D=t.sdS(99);t.R7$(6),t.FS9("src",n.getSteamAvatar(n.tournament.steamAvatar),t.B4B),t.R7$(4),t.FS9("value",n.tournament.tournamentHost.length>0?n.tournament.tournamentHost[0].name:"Admin Name"),t.R7$(5),t.R50("ngModel",n.tournament.hostName),t.R7$(),t.Y8G("ngIf",n.tournament.hostName&&1===n.focusedIndex),t.R7$(),t.Y8G("ngIf",n.tournament.hostName),t.R7$(2),t.Y8G("ngIf",1===n.focusedIndex)("ngIfElse",r),t.R7$(6),t.R50("ngModel",n.tournament.name),t.R7$(2),t.Y8G("ngIf",n.tournament.name&&2===n.focusedIndex),t.R7$(),t.Y8G("ngIf",n.tournament.name),t.R7$(2),t.Y8G("ngIf",2===n.focusedIndex)("ngIfElse",r),t.R7$(3),t.Y8G("ngIf",l.invalid&&l.touched),t.R7$(4),t.Aen(3===n.focusedIndex?"height:5rem":"overflow: hidden; height:5rem"),t.R50("ngModel",n.tournament.description),t.R7$(2),t.Y8G("ngIf",n.tournament.description&&3===n.focusedIndex),t.R7$(),t.Y8G("ngIf",n.tournament.description),t.R7$(2),t.Y8G("ngIf",3===n.focusedIndex)("ngIfElse",r),t.R7$(3),t.Y8G("ngIf",x.invalid&&x.touched),t.R7$(7),t.R50("ngModel",n.tournament.game),t.R7$(),t.Y8G("ngForOf",n.gameList),t.R7$(),t.Y8G("ngIf",n.tournament.game),t.R7$(5),t.R50("ngModel",n.tournament.gameMode),t.R7$(),t.Y8G("ngForOf",n.modeList),t.R7$(),t.Y8G("ngIf",n.tournament.gameMode>=0),t.R7$(5),t.R50("ngModel",n.tournament.format),t.R7$(),t.Y8G("ngForOf",n.formatList),t.R7$(),t.Y8G("ngIf",n.tournament.format>=0),t.R7$(8),t.R50("ngModel",n.tournament.maxPlayers),t.R7$(),t.Y8G("ngForOf",n.participantsList),t.R7$(),t.Y8G("ngIf",n.tournament.maxPlayers>=0),t.R7$(5),t.R50("ngModel",n.tournament.signupCost),t.R7$(3),t.Y8G("ngIf",4===n.focusedIndex),t.R7$(),t.Y8G("ngIf",n.tournament.signupCost>=0),t.R7$(2),t.Y8G("ngIf",4===n.focusedIndex)("ngIfElse",r),t.R7$(6),t.Y8G("ngIf",n.selectedCountry),t.R7$(),t.R50("ngModel",n.countryInput),t.Y8G("matAutocomplete",D),t.R7$(),t.Y8G("ngIf",n.countryInput),t.R7$(3),t.Y8G("ngForOf",n.filteredCountries),t.R7$(3),t.Y8G("label","Start date")("required",!0)("dateValue",n.registrationStartDate),t.R7$(),t.Y8G("label","End date")("required",!0)("dateValue",n.registrationEndDate),t.R7$(8),t.R50("ngModel",n.tournament.prizeTotal),t.R7$(3),t.Y8G("ngIf",n.tournament.prizeTotal>0),t.R7$(),t.Y8G("ngIf",a.controls.tournamentPrize&&(null==a.controls.tournamentPrize.errors?null:a.controls.tournamentPrize.errors.totalPercentageInvalid)),t.R7$(4),t.Y8G("ngForOf",n.tournament.tournamentRoundsDef.slice().reverse()),t.R7$(2),t.Y8G("Name","Save Settings")("InputIndex",1)("buttonStyle",n.buttonStyle)("ActiveEnabled",!1),t.R7$(2),t.Y8G("Name","test publish")("InputIndex",1)("buttonStyle",n.buttonStyle)("ActiveEnabled",!1)}},dependencies:[c.Sq,c.bT,c.B3,h.z,Wt,u.qT,u.me,u.Q0,u.BC,u.cb,u.YS,u.tU,u.VZ,u.zX,u.vS,u.cV,_.rl,_.nJ,_.MV,_.TL,_.JW,_.yw,w.fg,S.An,R.$3,$.wT,R.pN,p.iY,Kt.VO],styles:[".form-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex:1;flex-wrap:wrap;gap:.5rem}.form-section-title[_ngcontent-%COMP%]{font-family:Trajan Pro;font-style:normal;font-weight:400;font-size:1rem;color:#ffc100;text-shadow:2px 2px 4px rgba(0,0,0,.25);margin-bottom:1rem;margin-top:1rem}.form-section[_ngcontent-%COMP%]{display:flex;flex-direction:column}.form-row[_ngcontent-%COMP%], .admin-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:1rem;flex-wrap:wrap;align-items:center}.form-col[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex-wrap:wrap}input[_ngcontent-%COMP%]:-webkit-autofill, input[_ngcontent-%COMP%]:-webkit-autofill:hover, input[_ngcontent-%COMP%]:-webkit-autofill:focus, input[_ngcontent-%COMP%]:-webkit-autofill:active{-webkit-background-clip:text;-webkit-text-fill-color:#dadada;-webkit-transition:background-color 5000s ease-in-out 0s;transition:background-color 5000s ease-in-out 0s}.steam-avatar[_ngcontent-%COMP%]{display:flex;align-self:flex-start;max-width:3.8rem;width:auto;height:auto;object-fit:cover;border-radius:5px;border:1px solid black}.form-field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%}.mat-form-field[_ngcontent-%COMP%], .mat-input-element[_ngcontent-%COMP%]{overflow:visible}.form-field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:4rem}.mat-form-field-suffix[_ngcontent-%COMP%]{margin-left:.5rem}.form-field-fullwidth[_ngcontent-%COMP%]{display:flex;flex:1}.flag-icon[_ngcontent-%COMP%]{width:24px;height:16px;vertical-align:middle;margin-left:.8rem!important}.country-option[_ngcontent-%COMP%]{display:flex;align-items:center;height:1rem;white-space:nowrap;margin-left:-1rem}.mat-option-text[_ngcontent-%COMP%]{flex:1;white-space:nowrap;max-width:calc(100% - 32px)!important;margin-left:.5rem}.timepicker[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:wrap;gap:1rem}.add-delete[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:.4rem}.prize-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:wrap;gap:1rem}mat-button-toggle-group[_ngcontent-%COMP%]{margin-top:.2rem}.prize-suffix[_ngcontent-%COMP%]{color:var(--yellow-brand)}input[type=number][_ngcontent-%COMP%]::-webkit-inner-spin-button, input[type=number][_ngcontent-%COMP%]::-webkit-outer-spin-button{-webkit-appearance:none}input[type=number][_ngcontent-%COMP%]{-moz-appearance:textfield}.map-image[_ngcontent-%COMP%]{max-width:2rem;width:auto;height:auto}.disabled[_ngcontent-%COMP%]{color:#454545}.color-primary[_ngcontent-%COMP%]{color:var(--yellow-brand)}.rules-info[_ngcontent-%COMP%]{margin-bottom:1rem}@media only screen and (max-width: 800px){.admin-container[_ngcontent-%COMP%]{flex-direction:column;gap:0rem}}"]})}return i})();const Ve=["fileInput"];function De(i,s){if(1&i){const e=t.RV6();t.qex(0),t.j41(1,"mat-icon",44),t.bIt("click",function(n){t.eBV(e);const a=t.XpG();return t.Njj(a.deleteImage(n))}),t.EFF(2,"delete"),t.k0s(),t.bVm()}}function Ye(i,s){1&i&&(t.nrm(0,"img",45),t.j41(1,"div",46),t.EFF(2,"1280x720 1MB"),t.k0s())}function ze(i,s){if(1&i&&t.nrm(0,"img",47),2&i){const e=t.XpG();t.Y8G("src",e.selectedCountry.flag,t.B4B)("alt",e.selectedCountry.name)}}function Ae(i,s){1&i&&(t.qex(0),t.nrm(1,"app-tournaments-settings"),t.bVm())}function Ue(i,s){1&i&&(t.qex(0),t.nrm(1,"app-tournaments-rules"),t.bVm())}function Le(i,s){1&i&&(t.qex(0),t.nrm(1,"app-tournaments-participants"),t.bVm())}function Xe(i,s){1&i&&(t.qex(0),t.nrm(1,"app-tournaments-bracket"),t.bVm())}function He(i,s){1&i&&(t.qex(0),t.nrm(1,"app-tournaments-admins"),t.bVm())}let We=(()=>{class i{constructor(e,o,n,a,r){this.cdr=e,this.countryService=o,this.tournamentService=n,this.authService=a,this.dialogService=r,this.index=1,this.uploadedImage=null,this.subscriptions=[],this.indexStorageKey="tournaments_host_index_storage_key",this.countries=[],this.selectedCountry=null}ngOnInit(){this.setButtonStyles(),this.subscriptions.push(this.countryService.getCountries().subscribe(e=>{this.countries=e,this.getCountryFlag()})),this.subscriptions.push(this.tournamentService.getTournament().subscribe(e=>{this.tournament=e,this.getCountryFlag()})),console.log("onTournamentClicked"),console.log("tournamentParameter",this.tournamentParameter),this.tournamentParameter?this.tournamentService.updateTournament(this.tournamentParameter):this.subscriptions.push(this.authService.getUserProfile().subscribe(e=>{this.currentUser=e,this.subscriptions.push(this.tournamentService.getTournamentHost(this.currentUser.idSteam).subscribe({next:o=>{0==o.length&&(this.tournamentService.createNewTournament(),this.tournament.idPlayerHost=this.currentUser.idSteam,this.tournament.tournamentHost.push({id:null,idTournament:this.tournament.id,idSteam:this.currentUser.idSteam,name:this.currentUser.name,isHost:!0}),this.tournament.steamAvatar=this.currentUser.avatar,this.tournamentService.updateTournament(this.tournament)),1==o.length&&(this.tournament=o[0],this.tournamentService.updateTournament(this.tournament))}}))}))}ngAfterContentInit(){var e=localStorage.getItem(this.indexStorageKey);e&&(this.index=+e)}getTournamentStart(){if(this.tournament&&void 0!==this.tournament.dateStart){const e=new Date,o=new Date(this.tournament.dateStart);if(!o)return"No start date set";const n=o.getTime()-e.getTime();if(n>0){const a=Math.floor(n/1e3),r=Math.floor(a/60),l=Math.floor(r/60),x=Math.floor(l/24);return x>0?`Starts in ${x} day${x>1?"s":""}`:l>0?`Starts in ${l} hour${l>1?"s":""}`:r>0?`Starts in ${r} minute${r>1?"s":""}`:`Starts in ${a} second${a>1?"s":""}`}return"Tournament has started"}return"No start date set"}GetHostName(){return this.tournament?.hostName?this.tournament.hostName:this.tournament?.tournamentHost&&this.tournament.tournamentHost&&this.tournament.tournamentHost.length>0?this.tournament.tournamentHost[0].name:"Host name"}getTournamentName(){return this.tournament?.name?this.tournament.name:"Tournament Name"}getTournamentBanner(){return this.tournament?.banner?this.tournament.banner:"assets/icons/tournaments/tournament-placeholder-empty.png"}getCountryFlag(){if(this.tournament?.country&&this.countries){var e=this.tournament.country;const o=this.countries.find(n=>n.alpha2Code?.toUpperCase()===e?.toUpperCase());if(o)return this.selectedCountry=o,this.cdr.detectChanges(),o.flag}return this.selectedCountry=null,this.cdr.detectChanges(),""}getFormattedTimeAmPm(){return this.tournament&&void 0!==this.tournament.dateSignupClose?(0,g.H9)(this.tournament.dateSignupClose):"Start Time"}getFormattedDate(){return this.tournament&&void 0!==this.tournament.dateSignupClose?(0,g.po)(this.tournament.dateSignupClose):"Start Date"}getGameModeTournament(){return(0,g.dc)(-1)}getTournamentGetName(){return(0,g.Fp)(-1)}updateTournament(){this.tournamentService.updateTournament(this.tournament)}setButtonStyles(){const e=window.innerWidth;this.buttonStyle=e<600?{"padding-left":"0.6rem","padding-right":"0.6rem","min-height":"1rem",width:"100%"}:e<900?{"padding-left":"1rem","padding-right":"1rem","min-height":"2rem",width:"100%"}:{"padding-left":"3rem","padding-right":"3rem","min-height":"2.5rem",width:"100%"}}onResize(e){this.setButtonStyles()}OnClicked(e){this.index=e,localStorage.setItem(this.indexStorageKey,this.index.toString()),6===this.index&&(this.tournamentService.resetTournament(this.tournament),this.index=1)}onFileSelected(e){if(e.target&&e.target.files.length>0){const o=e.target.files[0];o&&this.checkImage(o)}}checkImage(e){const o=new Image;o.onload=()=>{1280===o.width&&720===o.height&&e.size<=1048576?this.convertImageToBase64(e):this.dialogService.showWarning("Invalid Image Format","Please make sure your image meets the following requirements: dimensions are 1280x720 and size is under 1MB.","Okay")},o.src=URL.createObjectURL(e)}convertImageToBase64(e){const o=new FileReader;o.onload=()=>{this.tournament.banner=o.result},o.readAsDataURL(e)}deleteImage(e){e?.stopPropagation(),this.tournament.banner="",this.resetFileInput()}resetFileInput(){this.fileInput&&this.fileInput.nativeElement&&(this.fileInput.nativeElement.value="")}getPlayerCount(){var e=0;return this.tournament?.tournamentPlayers&&(e=this.tournament.tournamentPlayers.length),this.tournament?.maxPlayers?`${e}/${this.tournament.maxPlayers}`:"Player / Max"}ngOnDestroy(){this.subscriptions.forEach(e=>{e.unsubscribe()})}static#t=this.\u0275fac=function(o){return new(o||i)(t.rXU(t.gRc),t.rXU(z.o),t.rXU(P),t.rXU(C.uR),t.rXU(y.o))};static#e=this.\u0275cmp=t.VBU({type:i,selectors:[["app-tournaments-host"]],viewQuery:function(o,n){if(1&o&&t.GBs(Ve,5),2&o){let a;t.mGM(a=t.lsd())&&(n.fileInput=a.first)}},hostBindings:function(o,n){1&o&&t.bIt("resize",function(r){return n.onResize(r)},!1,t.tSv)},inputs:{tournamentParameter:"tournamentParameter"},decls:75,vars:50,consts:[["noBanner",""],["fileInput",""],[1,"card"],[1,"left"],[1,"upload",3,"click"],[1,"image-container"],[1,"upload-image",3,"src"],[4,"ngIf","ngIfElse"],["type","file","accept","image/*",2,"display","none",3,"change"],[1,"middle-right","long-and-truncated"],[1,"middle","long-and-truncated"],[1,"title-container","long-and-truncated"],[1,"title-text","long-and-truncated"],[1,"midbottom-container"],[1,"game-host-container"],[1,"game-container"],["src","assets/icons/tournaments/aoe3-icon.png",1,"aoe3-icon"],[1,"host-container","long-and-truncated"],["src","assets/icons/tournaments/certified.svg"],[1,"date-country-container"],["matTooltip","Tournament Start Date",1,"date-container"],["src","assets/icons/tournaments/calendar3.svg"],["matTooltip","Tournament Start Time",1,"time-container"],["src","assets/icons/tournaments/clock.svg"],["matTooltip","Location Restriction",1,"country-container"],["src","assets/icons/tournaments/geo-alt.svg"],["class","flag-icon",3,"src","alt",4,"ngIf"],[1,"right"],[1,"countdown-container"],[1,"countdown"],[1,"rightbottom"],[1,"mode-player-container"],[1,"mode-container"],["src","assets/icons/tournaments/joystick.svg"],[1,"player-container"],["src","assets/icons/tournaments/people.svg"],[1,"fee-prize-container"],[1,"fee-container"],["src","assets/icons/tournaments/ticket.svg"],[1,"prize-container"],["src","assets/icons/tournaments/money-bag.svg"],[1,"button-row"],[1,"button",3,"OnButtonClicked","Name","buttonStyle","InputIndex","ActiveEnabled","activeButton"],[4,"ngIf"],["color","warn",1,"delete-overlay",3,"click"],["src","assets/icons/tournaments/cloud-arrow-up-fill.svg",1,"image-overlay"],[1,"text-overlay"],[1,"flag-icon",3,"src","alt"]],template:function(o,n){if(1&o){const a=t.RV6();t.j41(0,"div",2)(1,"div",3)(2,"div",4),t.bIt("click",function(){t.eBV(a);const l=t.sdS(9);return t.Njj(l.click())}),t.j41(3,"div",5),t.nrm(4,"img",6),t.k0s(),t.DNE(5,De,3,0,"ng-container",7)(6,Ye,3,0,"ng-template",null,0,t.C5r),t.j41(8,"input",8,1),t.bIt("change",function(l){return t.eBV(a),t.Njj(n.onFileSelected(l))}),t.k0s()()(),t.j41(10,"div",9)(11,"div",10)(12,"div",11)(13,"div",12),t.EFF(14),t.k0s()(),t.j41(15,"div",13)(16,"div",14)(17,"div",15),t.nrm(18,"img",16),t.j41(19,"div"),t.EFF(20),t.k0s()(),t.j41(21,"div",17),t.nrm(22,"img",18),t.j41(23,"div"),t.EFF(24),t.k0s()()(),t.j41(25,"div",19)(26,"div",20),t.nrm(27,"img",21),t.j41(28,"div"),t.EFF(29),t.k0s()(),t.j41(30,"div",22),t.nrm(31,"img",23),t.j41(32,"div"),t.EFF(33),t.k0s()(),t.j41(34,"div",24),t.nrm(35,"img",25),t.DNE(36,ze,1,2,"img",26),t.j41(37,"span"),t.EFF(38),t.k0s()()()()(),t.j41(39,"div",27)(40,"div",28)(41,"div",29),t.EFF(42),t.k0s()(),t.j41(43,"div",30)(44,"div",31)(45,"div",32),t.nrm(46,"img",33),t.j41(47,"div"),t.EFF(48),t.k0s()(),t.j41(49,"div",34),t.nrm(50,"img",35),t.j41(51,"div"),t.EFF(52),t.k0s()()(),t.j41(53,"div",36)(54,"div",37),t.nrm(55,"img",38),t.j41(56,"div"),t.EFF(57),t.k0s()(),t.j41(58,"div",39),t.nrm(59,"img",40),t.j41(60,"div"),t.EFF(61),t.k0s()()()()()()(),t.j41(62,"div",41)(63,"app-custom-button",42),t.bIt("OnButtonClicked",function(l){return t.eBV(a),t.Njj(n.OnClicked(l))}),t.k0s(),t.j41(64,"app-custom-button",42),t.bIt("OnButtonClicked",function(l){return t.eBV(a),t.Njj(n.OnClicked(l))}),t.k0s(),t.j41(65,"app-custom-button",42),t.bIt("OnButtonClicked",function(l){return t.eBV(a),t.Njj(n.OnClicked(l))}),t.k0s(),t.j41(66,"app-custom-button",42),t.bIt("OnButtonClicked",function(l){return t.eBV(a),t.Njj(n.OnClicked(l))}),t.k0s(),t.j41(67,"app-custom-button",42),t.bIt("OnButtonClicked",function(l){return t.eBV(a),t.Njj(n.OnClicked(l))}),t.k0s(),t.j41(68,"app-custom-button",42),t.bIt("OnButtonClicked",function(l){return t.eBV(a),t.Njj(n.OnClicked(l))}),t.k0s()(),t.j41(69,"div"),t.DNE(70,Ae,2,0,"ng-container",43)(71,Ue,2,0,"ng-container",43)(72,Le,2,0,"ng-container",43)(73,Xe,2,0,"ng-container",43)(74,He,2,0,"ng-container",43),t.k0s()}if(2&o){const a=t.sdS(7);t.R7$(4),t.Y8G("src",n.getTournamentBanner(),t.B4B),t.R7$(),t.Y8G("ngIf",null==n.tournament?null:n.tournament.banner)("ngIfElse",a),t.R7$(9),t.SpI(" ",n.getTournamentName()," "),t.R7$(6),t.JRh(n.getTournamentGetName()),t.R7$(4),t.SpI(" Hosted by ",n.GetHostName()," "),t.R7$(5),t.SpI(" ",n.getFormattedDate()," "),t.R7$(4),t.SpI(" ",n.getFormattedTimeAmPm()," "),t.R7$(3),t.Y8G("ngIf",n.selectedCountry),t.R7$(2),t.JRh((null==n.selectedCountry?null:n.selectedCountry.name)||"No country restrictions"),t.R7$(4),t.SpI(" ",n.getTournamentStart()," "),t.R7$(6),t.JRh(n.getGameModeTournament()),t.R7$(4),t.SpI(" ",n.getPlayerCount()," "),t.R7$(5),t.SpI("$ ",n.tournament?n.tournament.signupCost:0,""),t.R7$(4),t.SpI("$ ",n.tournament?n.tournament.prizeTotal:0,""),t.R7$(2),t.Y8G("Name","Settings")("buttonStyle",n.buttonStyle)("InputIndex",1)("ActiveEnabled",1===n.index)("activeButton",n.index),t.R7$(),t.Y8G("Name","Rules")("buttonStyle",n.buttonStyle)("InputIndex",2)("ActiveEnabled",2===n.index)("activeButton",n.index),t.R7$(),t.Y8G("Name","Participants")("buttonStyle",n.buttonStyle)("InputIndex",3)("ActiveEnabled",3===n.index)("activeButton",n.index),t.R7$(),t.Y8G("Name","Bracket")("buttonStyle",n.buttonStyle)("InputIndex",4)("ActiveEnabled",4===n.index)("activeButton",n.index),t.R7$(),t.Y8G("Name","Admins")("buttonStyle",n.buttonStyle)("InputIndex",5)("ActiveEnabled",5===n.index)("activeButton",n.index),t.R7$(),t.Y8G("Name","Reset")("buttonStyle",n.buttonStyle)("InputIndex",6)("ActiveEnabled",6===n.index)("activeButton",n.index),t.R7$(2),t.Y8G("ngIf",1===n.index),t.R7$(),t.Y8G("ngIf",2===n.index),t.R7$(),t.Y8G("ngIf",3===n.index),t.R7$(),t.Y8G("ngIf",4===n.index),t.R7$(),t.Y8G("ngIf",5===n.index)}},dependencies:[c.bT,h.z,S.An,G.oV,ct,Mt,Nt,Yt,$e],styles:['.card[_ngcontent-%COMP%]{display:flex;flex-direction:row;background:#45454580;color:#aaa;font-family:"Source Sans 3";font-size:1rem;font-weight:400;font-style:normal;text-shadow:2px 2px 4px rgba(0,0,0,.25);padding:.5rem}.left[_ngcontent-%COMP%]{display:flex;position:relative;margin-right:.5rem}.upload[_ngcontent-%COMP%]:hover{opacity:.6}.upload[_ngcontent-%COMP%]:active{transform:scale(.95)}.upload-image[_ngcontent-%COMP%]{display:block;position:relative;max-width:15rem;height:auto;border-radius:5px;filter:drop-shadow(2px 2px 4px rgba(0,0,0,.25))}.image-overlay[_ngcontent-%COMP%]{position:absolute;transform:translate(138%,-158%);max-width:100px;width:auto;height:auto}.delete-overlay[_ngcontent-%COMP%]{position:absolute;top:10px;right:10px}.text-overlay[_ngcontent-%COMP%]{position:absolute;color:#ddd;text-shadow:2px 2px 2px rgba(0,0,0,.75);font-weight:700;font-size:1.1rem;letter-spacing:2px;line-height:1;bottom:8%;z-index:1;transform:translate(38%)}.middle-right[_ngcontent-%COMP%]{display:flex;flex:1}.middle[_ngcontent-%COMP%]{display:flex;flex:1;flex-direction:column;justify-content:space-between;margin:.5rem}.title-container[_ngcontent-%COMP%]{display:flex;gap:.5rem;align-items:center}.flag-icon[_ngcontent-%COMP%]{width:24px;height:16px;vertical-align:middle}.title-text[_ngcontent-%COMP%]{font-family:Trajan Pro;font-style:normal;font-weight:700;font-size:clamp(1rem,2vw,2rem);color:#fff;text-shadow:2px 2px 4px rgba(0,0,0,.25)}.long-and-truncated[_ngcontent-%COMP%]{flex:1}.long-and-truncated[_ngcontent-%COMP%], .long-and-truncated[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.midbottom-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.3rem}.game-host-container[_ngcontent-%COMP%]{display:flex;gap:1.2rem}.game-container[_ngcontent-%COMP%]{display:flex;gap:.5rem;align-items:center}.aoe3-icon[_ngcontent-%COMP%]{width:18px;height:auto}.host-container[_ngcontent-%COMP%]{display:flex;gap:.5rem;align-items:center}.date-country-container[_ngcontent-%COMP%]{display:flex;gap:1.2rem}.date-container[_ngcontent-%COMP%], .time-container[_ngcontent-%COMP%], .country-container[_ngcontent-%COMP%]{display:flex;gap:.5rem;align-items:center}.right[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between;margin:.5rem}.countdown-container[_ngcontent-%COMP%]{display:flex;align-items:center}.countdown[_ngcontent-%COMP%]{font-family:Trajan Pro;font-style:normal;font-weight:400;font-size:.8rem;color:#000;text-shadow:2px 2px 4px rgba(0,0,0,.25);padding:.1rem 1rem;background:var(--yellow-brand);filter:drop-shadow(2px 2px 4px rgba(0,0,0,.25));border-radius:10px}.rightbottom[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.3rem}.mode-player-container[_ngcontent-%COMP%]{display:flex;gap:1.2rem}.mode-container[_ngcontent-%COMP%], .player-container[_ngcontent-%COMP%]{display:flex;gap:.5rem;align-items:center}.fee-prize-container[_ngcontent-%COMP%]{display:flex;gap:1.2rem}.fee-container[_ngcontent-%COMP%], .prize-container[_ngcontent-%COMP%]{display:flex;gap:.5rem;align-items:center}.button-row[_ngcontent-%COMP%]{display:flex;gap:1rem;flex:1;margin-top:1rem;margin-bottom:1rem}@media only screen and (max-width: 900px){.card[_ngcontent-%COMP%]{flex-direction:column}.left[_ngcontent-%COMP%]{justify-content:center}.countdown[_ngcontent-%COMP%]{margin-bottom:1rem}}@media only screen and (max-width: 800px){.button[_ngcontent-%COMP%]{flex:1;width:100%}.button-row[_ngcontent-%COMP%]{flex-direction:column;gap:.5rem}}@media only screen and (max-width: 700px){.midbottom[_ngcontent-%COMP%]{gap:.2rem}.game-host-container[_ngcontent-%COMP%], .date-country-container[_ngcontent-%COMP%]{flex-direction:column;gap:.2rem}}@media only screen and (max-width: 500px){.countdown[_ngcontent-%COMP%]{display:none}.rightbottom[_ngcontent-%COMP%]{gap:.2rem}.mode-player-container[_ngcontent-%COMP%], .fee-prize-container[_ngcontent-%COMP%]{flex-direction:column;gap:.2rem}}']})}return i})();function Ke(i,s){if(1&i){const e=t.RV6();t.qex(0),t.j41(1,"app-tournaments-events",7),t.bIt("onTournamentClicked",function(n){t.eBV(e);const a=t.XpG();return t.Njj(a.onTournamentClicked(n))}),t.k0s(),t.bVm()}}function Je(i,s){if(1&i&&(t.qex(0),t.nrm(1,"app-tournaments-host",8),t.bVm()),2&i){const e=t.XpG(2);t.R7$(),t.Y8G("tournamentParameter",e.tournament)}}function Qe(i,s){if(1&i&&(t.qex(0),t.DNE(1,Je,2,1,"ng-container",6),t.bVm()),2&i){const e=t.XpG();t.R7$(),t.Y8G("ngIf",e.isLogged)}}function qe(i,s){if(1&i&&(t.qex(0),t.nrm(1,"app-tournament-details",8),t.bVm()),2&i){const e=t.XpG();t.R7$(),t.Y8G("tournamentParameter",e.tournament)}}const Ze=[{path:"",component:(()=>{class i{constructor(e,o,n){this.authService=e,this.dialogService=o,this.steamService=n,this.index=2,this.setButtonStyles(),this.subscription=this.authService.isLoggedIn.subscribe(a=>{this.isLogged=a})}setButtonStyles(){const e=window.innerWidth;this.buttonStyle=e<600?{"padding-left":"0.6rem","padding-right":"0.6rem","min-height":"1rem",width:"100%"}:e<900?{"padding-left":"1rem","padding-right":"1rem","min-height":"2rem",width:"100%"}:{"padding-left":"3rem","padding-right":"3rem","min-height":"2.5rem",width:"100%"}}OnClicked(e){this.index=e,2==e&&!this.isLogged&&this.dialogService.show("You are not logged in!","Please log in with your Steam account to access this content.","Login").then(o=>{o&&this.steamService.login()})}onTournamentClicked(e){this.tournament=e,this.index=e.published?3:2}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}static#t=this.\u0275fac=function(o){return new(o||i)(t.rXU(C.uR),t.rXU(y.o),t.rXU(T.m))};static#e=this.\u0275cmp=t.VBU({type:i,selectors:[["app-tournaments-main"]],decls:12,vars:18,consts:[[1,"custom-container"],[1,"main-heading"],[1,"custom-parent","dark-bg","rounded"],[1,"button-row"],[1,"button",3,"OnButtonClicked","Name","buttonStyle","InputIndex","ActiveEnabled","activeButton"],[1,"button","host-button",3,"OnButtonClicked","Name","buttonStyle","InputIndex","ActiveEnabled","activeButton"],[4,"ngIf"],[3,"onTournamentClicked"],[3,"tournamentParameter"]],template:function(o,n){1&o&&(t.j41(0,"div",0)(1,"h1",1),t.EFF(2,"Tournaments"),t.k0s(),t.j41(3,"div",2)(4,"div",3)(5,"app-custom-button",4),t.bIt("OnButtonClicked",function(r){return n.OnClicked(r)}),t.k0s(),t.j41(6,"app-custom-button",5),t.bIt("OnButtonClicked",function(r){return n.OnClicked(r)}),t.k0s(),t.j41(7,"app-custom-button",5),t.bIt("OnButtonClicked",function(r){return n.OnClicked(r)}),t.k0s()(),t.j41(8,"div"),t.DNE(9,Ke,2,0,"ng-container",6)(10,Qe,2,1,"ng-container",6)(11,qe,2,1,"ng-container",6),t.k0s()()()),2&o&&(t.R7$(5),t.Y8G("Name","All Events")("buttonStyle",n.buttonStyle)("InputIndex",1)("ActiveEnabled",1===n.index)("activeButton",n.index),t.R7$(),t.Y8G("Name","Host Event")("buttonStyle",n.buttonStyle)("InputIndex",2)("ActiveEnabled",2===n.index)("activeButton",n.index),t.R7$(),t.Y8G("Name","**Details**")("buttonStyle",n.buttonStyle)("InputIndex",3)("ActiveEnabled",3===n.index)("activeButton",n.index),t.R7$(2),t.Y8G("ngIf",1===n.index),t.R7$(),t.Y8G("ngIf",2===n.index),t.R7$(),t.Y8G("ngIf",3===n.index))},dependencies:[c.bT,h.z,f,q,We],styles:[".button-row[_ngcontent-%COMP%]{display:flex;gap:1rem;flex:1;margin-bottom:1rem}.host-button[_ngcontent-%COMP%]{margin-left:auto}@media only screen and (max-width: 800px){.button[_ngcontent-%COMP%]{flex:1;width:100%}.button-row[_ngcontent-%COMP%]{flex-direction:column;gap:.5rem}}"]})}return i})()}];let tn=(()=>{class i{static#t=this.\u0275fac=function(o){return new(o||i)};static#e=this.\u0275mod=t.$C({type:i});static#n=this.\u0275inj=t.G2t({imports:[O.iI.forChild(Ze),O.iI]})}return i})();var en=m(4719);let nn=(()=>{class i{static#t=this.\u0275fac=function(o){return new(o||i)};static#e=this.\u0275mod=t.$C({type:i});static#n=this.\u0275inj=t.G2t({imports:[c.MD,tn,en.G,j.G,u.YN]})}return i})()},6713:(Y,F,m)=>{m.d(F,{z:()=>O});var c=m(4438),j=m(177);let O=(()=>{class t{constructor(){this.ActiveEnabled=!0,this.OnButtonClicked=new c.bkB,this.activeButton=null}OnClicked(y){this.activeButton=y,this.OnButtonClicked.emit(this.InputIndex)}static#t=this.\u0275fac=function(T){return new(T||t)};static#e=this.\u0275cmp=c.VBU({type:t,selectors:[["app-custom-button"]],inputs:{InputIndex:"InputIndex",Name:"Name",ActiveEnabled:"ActiveEnabled",buttonStyle:"buttonStyle",activeButton:"activeButton"},outputs:{OnButtonClicked:"OnButtonClicked"},decls:2,vars:4,consts:[[1,"button-style",3,"click","ngStyle"]],template:function(T,h){1&T&&(c.j41(0,"button",0),c.bIt("click",function(){return h.OnClicked(h.InputIndex)}),c.EFF(1),c.k0s()),2&T&&(c.AVh("active",h.activeButton===h.InputIndex&&h.ActiveEnabled),c.Y8G("ngStyle",h.buttonStyle),c.R7$(),c.JRh(h.Name))},dependencies:[j.B3],styles:[".button-style[_ngcontent-%COMP%]{box-shadow:0 0 5px #00000080;background-color:#454545f2;padding:.5rem;border-radius:5px;cursor:pointer;border:none;color:#fff;flex:1;font-family:Trajan Pro;font-size:clamp(.8rem,2vw,1rem);white-space:nowrap}.button-style.active[_ngcontent-%COMP%]{background-color:var(--yellow-brand);color:#000}.button-style[_ngcontent-%COMP%]:hover{background-color:var(--yellow-brand-hover)}.button-style.active[_ngcontent-%COMP%]:hover{background-color:var(--yellow-brand)}@media only screen and (max-width:600px){.button-style[_ngcontent-%COMP%]{padding:.2rem}}"]})}return t})()}}]);